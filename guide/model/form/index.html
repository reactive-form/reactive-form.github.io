<!doctype html> <html> <head> <title>Reactive Form - 模型驱动、可扩展的表单引擎</title> <meta charset=UTF-8> <meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"> <meta name=renderer content=webkit> <meta http-equiv=X-UA-Compatible content="IE=Edge,chrome=1"> <meta name=apple-mobile-web-app-capable content=yes> <meta name=apple-mobile-web-app-status-bar-style content=black-translucent> <meta name=apple-mobile-web-app-title content=ReactiveForm> <meta name=mobile-web-app-capable content=ReactiveForm> <meta name=application-name content=ReactiveForm> <meta content="telephone=no" name=format-detection> <meta name=msapplication-tap-highlight content=no> <meta name=author content=""> <meta name=keywords content=""> <meta name=description content=""> <link rel="shortcut icon" href="/favicon.ico"> <script src="/assets/javascripts/luda-degradation.min-de40bf23.js"></script> <script src="/assets/javascripts/turbo.es2017-umd.min-6c3e5b73.js" data-turbo-track=reload></script> <link href="/assets/stylesheets/luda-default.min-d9508530.css" rel=stylesheet data-turbo-track=reload /> <link href="/assets/stylesheets/rouge-ebba3ab6.css" rel=stylesheet data-turbo-track=reload /> <link href="/assets/stylesheets/site-b4ec337b.css" rel=stylesheet data-turbo-track=reload /> <script src="/assets/javascripts/luda.min-10857b5a.js" data-turbo-track=reload></script> </head> <body id=""> <div class=grid-edge> <aside class="nav-aside col-12 col-3-m bc-light sd-low"> <a href="/" class=nav-logo> <picture class=d-block> <source srcset="/assets/images/logo-f19b9c85.svg" media="(min-width: 768px)"> <img src="/assets/images/logo_full-dcdab38b.svg" alt="rcfm logo" width=""/> </picture> </a> <button class="nav-open btn btn-ico btn-text-dark" data-toggle-for=aside-menu> <i class="ico ico-menu"></i> </button> <div class="nav-menu pb-large" data-toggle-target=aside-menu> <button class="nav-close btn btn-ico btn-text-dark" data-toggleable> <i class="ico ico-cross"></i> </button> <div class="nav-items mx-medium"> <p class="nav-items-title px-small mb-tiny fw-bold c-dark">开始</p> <a href="/guide/general/situations/" title="适用场景" class="btn btn-text-dark btn-small mt-tiny rounded ">适用场景</a> <a href="/guide/general/platforms/" title="兼容性" class="btn btn-text-dark btn-small mt-tiny rounded ">兼容性</a> <a href="/guide/general/installation/" title="安装方式" class="btn btn-text-dark btn-small mt-tiny rounded ">安装方式</a> <a href="/guide/general/get_started/" title="入门示例" class="btn btn-text-dark btn-small mt-tiny rounded ">入门示例</a> </div> <div class="nav-items mx-medium"> <p class="nav-items-title px-small mb-tiny fw-bold c-dark">模型</p> <a href="/guide/model/introduction/" title="概述" class="btn btn-text-dark btn-small mt-tiny rounded ">概述</a> <a href="/guide/model/reactive/" title=Reactive class="btn btn-text-dark btn-small mt-tiny rounded ">Reactive</a> <a href="/guide/model/reactive_customization/" title="构建引擎" class="btn btn-text-dark btn-small mt-tiny rounded ">构建引擎</a> <a href="/guide/model/form/" title="内置引擎" class="btn btn-text-dark btn-small mt-tiny rounded btn-active">内置引擎</a> <a href="/guide/model/form_customization/" title="扩展内置引擎" class="btn btn-text-dark btn-small mt-tiny rounded ">扩展内置引擎</a> <a href="/guide/model/i18n/" title="国际化" class="btn btn-text-dark btn-small mt-tiny rounded ">国际化</a> </div> <div class="nav-items mx-medium"> <p class="nav-items-title px-small mb-tiny fw-bold c-dark">组件</p> <a href="/guide/ui/introduction/" title="概述" class="btn btn-text-dark btn-small mt-tiny rounded ">概述</a> <a href="/guide/ui/subscription/" title="订阅成员状态" class="btn btn-text-dark btn-small mt-tiny rounded ">订阅成员状态</a> <a href="/guide/ui/installation/" title="注册成员组件" class="btn btn-text-dark btn-small mt-tiny rounded ">注册成员组件</a> <a href="/guide/ui/form/" title="内置引擎组件" class="btn btn-text-dark btn-small mt-tiny rounded ">内置引擎组件</a> </div> <div class="nav-items mx-medium"> <p class="nav-items-title px-small mb-tiny fw-bold c-dark">其它</p> <a href="/guide/others/faq/" title=FAQ class="btn btn-text-dark btn-small mt-tiny rounded ">FAQ</a> <a href="/guide/others/summary/" title="写在最后" class="btn btn-text-dark btn-small mt-tiny rounded ">写在最后</a> </div> </div> </aside> <div class=col-auto> <article class="docs article p-medium p-large-m "> <h1 id="内置表单引擎">内置表单引擎</h1> <p>为了方便开发者在定制化要求不高的场景使用，Reactive Form 内置了一个基于核心扩展成的引擎， 内置引擎被封装在 <a href="/api/form/"><code>Form</code></a> 模型内，包含了常用的表单成员类型，如文本输入、数字输入、单选、多选等。 本章主要对内置引擎所包含的各成员类型以及它们之间的关系作出介绍。</p> <h2 id=fieldset>Fieldset</h2> <p><code>Fieldset</code> 类型成员与 HTML 中的 <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/fieldset"><code>&lt;fieldset&gt;</code></a> 标签类似，主要作用是用来包裹各种输入项类型成员，形成有组织的层级结构。</p> <p><code>Fieldset</code> 的 <code>schema</code> 属性范围包括:</p> <ul> <li><code>name</code>: 同辈成员间唯一性标识，默认为成员 <code>id</code>，不接受被设定为 <a href="/guide/model/reactive/#dsl">DSL</a>。</li> <li><code>label</code>: 标题，默认为 <a href="/guide/model/i18n/">I18n</a> 定义的 locale，不接受被设定为 <a href="/guide/model/reactive/#dsl">DSL</a>。</li> <li><code>description</code>: 描述，默认为 <a href="/guide/model/i18n/">I18n</a> 定义的 locale，不接受被设定为 <a href="/guide/model/reactive/#dsl">DSL</a>。</li> </ul> <p>具体用法请看下例。</p> <iframe height=600 style="width: 100%;" scrolling=no title="model/form/introduction/1" src="https://codepen.io/rcfm/embed/gOXNbPO?default-tab=js%2Cresult&amp;editable=true" frameborder=no loading=lazy allowtransparency=true allowfullscreen=true> See the Pen <a href="https://codepen.io/rcfm/pen/gOXNbPO"> model/form/introduction/1</a> by rcfm (<a href="https://codepen.io/rcfm">@rcfm</a>) on <a href="https://codepen.io">CodePen</a>. </iframe> <h2 id="输入项类型">输入项类型</h2> <p><code>Fieldset</code> 成员的子级应是各种输入项成员，与 HTML 中 <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input"><code>&lt;input&gt;</code></a> 标签类似，被包裹的各类成员可被用于接收不同数据类型的输入。</p> <p>在内置引擎中，注册好的输入项类型 <code>schema</code> 属性范围包括：</p> <ul> <li><code>name</code>: 同辈成员间唯一标识，默认为成员 <code>id</code>，不接受被设定为 <a href="/guide/model/reactive/#dsl">DSL</a>。</li> <li><code>label</code>: 标题，默认为 <a href="/guide/model/i18n/">I18n</a> 定义的 locale，不接受被设定为 <a href="/guide/model/reactive/#dsl">DSL</a>。</li> <li><code>value</code>: 输入值，默认为 <code>null</code>，不接受被设定为 <a href="/guide/model/reactive/#dsl">DSL</a>。</li> <li><code>placeholder</code>: 占位符，默认为 <a href="/guide/model/i18n/">I18n</a> 定义的 locale，不接受被设定为 <a href="/guide/model/reactive/#dsl">DSL</a>。</li> <li><code>options</code>: 输入值可选项，默认为只有一个元素的数组，不接受被设定为 <a href="/guide/model/reactive/#dsl">DSL</a>。</li> <li><code>validation</code>: 输入值校验规则，默认为 <code>null</code>，当不为空时，会对 <code>value</code> 当前值进行校验。</li> <li><code>calculation</code>: 输入值计算规则，默认为 <code>null</code>，当不为空时，<code>value</code> 会自动被设定为计算得出的值。</li> <li><code>editable</code>: 是否可输入，默认为 <code>true</code>。</li> <li><code>visible</code>: 是否可见，默认为 <code>true</code>。</li> </ul> <p>当输入项成员的属性被设定为不合规的值时，其存储空间中会被写入错误信息， 根据类型不同，以上属性的支持范围有所不同，各类型成员支持的属性和具体用法如下:</p> <h3 id="文本输入项">文本输入项</h3> <p><code>TextField</code> 和 <code>MultilineTextField</code> 均为文本输入项类型，成员接受 <code>String</code> 作为输入值。 二者 <code>schema</code> 定义类似，不同的是语意上的差异，<code>MultilineTextField</code> 强调了多行文本的语意性。</p> <iframe height=600 style="width: 100%;" scrolling=no title="model/form/introduction/2" src="https://codepen.io/rcfm/embed/YzEoWbd?default-tab=js%2Cresult&amp;editable=true" frameborder=no loading=lazy allowtransparency=true allowfullscreen=true> See the Pen <a href="https://codepen.io/rcfm/pen/YzEoWbd"> model/form/introduction/2</a> by rcfm (<a href="https://codepen.io/rcfm">@rcfm</a>) on <a href="https://codepen.io">CodePen</a>. </iframe> <h3 id="数字输入项">数字输入项</h3> <p><code>NumberField</code> 是数字输入项类型，接受 <code>Number</code> 作为输入值。</p> <iframe height=600 style="width: 100%;" scrolling=no title=Untitled src="https://codepen.io/rcfm/embed/wvPLzeW?default-tab=js%2Cresult&amp;editable=true" frameborder=no loading=lazy allowtransparency=true allowfullscreen=true> See the Pen <a href="https://codepen.io/rcfm/pen/wvPLzeW"> Untitled</a> by rcfm (<a href="https://codepen.io/rcfm">@rcfm</a>) on <a href="https://codepen.io">CodePen</a>. </iframe> <h3 id="单项选择输入项">单项选择输入项</h3> <p><code>RadioField</code> 和 <code>SingleSelectField</code> 均为单项选择输入项类型，接受 <code>String</code> 作为输入值， 且必须在 <code>options</code> 范围内。二者 <code>schema</code> 定义类似，不同的是语意上的差异， <code>RadioField</code> 强调单选框选择，<code>SingleSelectField</code> 强调下拉菜单选择。 另外， <code>SingleSelectField</code> 还多了一个 <code>placeholder</code> 属性。</p> <iframe height=600 style="width: 100%;" scrolling=no title="model/form/introduction/4" src="https://codepen.io/rcfm/embed/YzEmXEW?default-tab=js%2Cresult&amp;editable=true" frameborder=no loading=lazy allowtransparency=true allowfullscreen=true> See the Pen <a href="https://codepen.io/rcfm/pen/YzEmXEW"> model/form/introduction/4</a> by rcfm (<a href="https://codepen.io/rcfm">@rcfm</a>) on <a href="https://codepen.io">CodePen</a>. </iframe> <h3 id="多项选择输入项">多项选择输入项</h3> <p><code>CheckboxField</code> 和 <code>MultipleSelectField</code> 均为多项选择输入项， 接受元素为 <code>String</code> 的 <code>Array</code> 作为输入值，且元素必须在 <code>options</code> 范围内。 二者 <code>schema</code> 定义类似，不同的是语意上的差异， <code>CheckboxField</code> 强调复选框选择，<code>MultipleSelectField</code> 强调下拉菜单选择。</p> <iframe height=600 style="width: 100%;" scrolling=no title="model/form/introduction/5" src="https://codepen.io/rcfm/embed/MWONwdd?default-tab=js%2Cresult&amp;editable=true" frameborder=no loading=lazy allowtransparency=true allowfullscreen=true> See the Pen <a href="https://codepen.io/rcfm/pen/MWONwdd"> model/form/introduction/5</a> by rcfm (<a href="https://codepen.io/rcfm">@rcfm</a>) on <a href="https://codepen.io">CodePen</a>. </iframe> <h2 id="子表单">子表单</h2> <p>子表单通常指的是，表单中嵌套的一组结构相同，可被复制的输入项。 比如在一张个人履历调查表中，教育经历可以填写多条记录，每条记录的结构相同，都包含学校、学历、周期等信息。 内置引擎包含的成员类型中，提供了子表单的处理能力。这些类型是 <code>Subform</code>、<code>SubformFieldset</code> 以及 <code>Subform*Field</code>。</p> <p><code>Subform*Field</code> 是基于元编程的方式， 使用其它输入项类型动态生成的新类型，<code>schema</code> 的定义并没有被修改， 举例来说 <code>SubformTextField</code> 是基于 <code>TextField</code> 类型生成的，其 <code>schema</code> 与 <code>TextField</code> 相同。</p> <p><code>SubformFieldset</code> 的作用只是包裹一组 <code>Subform*Field</code> 形成一条记录， 因此，其本身并没有显示地定义 <code>schema</code>。</p> <p><code>Subform</code> 的 <code>schema</code> 属性范围包括:</p> <ul> <li><code>name</code>: 同辈成员间唯一性标识，默认为成员 <code>id</code>，不接受被设定为 <a href="/guide/model/reactive/#dsl">DSL</a>。</li> <li><code>label</code>: 标题，默认为 <a href="/guide/model/i18n/">I18n</a> 定义的 locale，不接受被设定为 <a href="/guide/model/reactive/#dsl">DSL</a>。</li> <li><code>editable</code>: 包裹的 <code>Subform*Field</code>是否可输入，默认为 <code>true</code>。</li> <li><code>visible</code>: 是否可见，默认为 <code>true</code>。</li> </ul> <p>为了确保子表单中不同记录间结构的一致性，当 <code>SubformFieldset</code> 被创建后， 会克隆进一组其它 <code>SubformFieldset</code> 中已存在的 <code>Subform*Field</code>； 当 <code>SubformFieldset</code> 中被添加进 <code>Subform*Field</code>， 其它 <code>SubformFieldset</code> 也都会被复制进一个属性设定值相同的 <code>Subform*Field</code>； 当 <code>SubformFieldset</code> 中的 <code>Subform*Field</code> 被删除，其它 <code>SubformFieldset</code> 中同一 <code>order</code> 位置 的 <code>Subform*Field</code> 也都会被删除； 当 <code>Subform*Field</code> 除了 <code>value</code> 外的属性设定值变更， 其它 <code>SubformFieldset</code> 中同一 <code>order</code> 位置的 <code>Subform*Field</code> 的同一属性都会被设定为相同的值。</p> <p>我们通过下面的示例来具体了解子表单的用法，读者可以尝试修改代码来体会上文描述的行为。</p> <iframe height=600 style="width: 100%;" scrolling=no title="model/form/introduction/6" src="https://codepen.io/rcfm/embed/podMEgb?default-tab=js%2Cresult&amp;editable=true" frameborder=no loading=lazy allowtransparency=true allowfullscreen=true> See the Pen <a href="https://codepen.io/rcfm/pen/podMEgb"> model/form/introduction/6</a> by rcfm (<a href="https://codepen.io/rcfm">@rcfm</a>) on <a href="https://codepen.io">CodePen</a>. </iframe> <h2 id="小结">小结</h2> <ul> <li><code>Fieldset</code> 主要用来包裹各种输入项类型成员，形成有组织的层级结构。</li> <li>输入项成员被用于接收不同数据类型的输入，当输入项成员的属性被设定为不合规的值时，会向其存储空间中写入错误信息。</li> <li>子表单是表单中嵌套的一组结构相同，可被复制的输入项。</li> <li><code>Subform*Field</code> 类型成员，除更新 <code>value</code> 设定值外，其它操作会同步执行于相同 <code>Subform</code> 的各 <code>SubformFieldset</code> 中。</li> </ul> <p>通过阅读本章，我们了解了 Reactive Form 内置引擎提供的成员，以及这些成员的能力和行为。 事实上，内置引擎支持扩展成员类型，这意味着我们可以基于内置引擎扩展更丰富的表单能力， 在下一章中，我们将一起探索如何 <a href="/guide/model/form_customization/">扩展内置 Form 引擎</a>。</p> </article> <footer class="footer py-medium px-medium py-large-m sd-low"> <p class="p7 ta-center c-secondary"> Reactive Form 基于 <a href="https://creativecommons.org/licenses/by-nd/3.0/cn/legalcode">CC BY-ND</a> 协议发布 </br> Copyright © 2022 吉林省吉林祥云信息技术有限公司 </p> </footer> </div> </div> </body> </html>