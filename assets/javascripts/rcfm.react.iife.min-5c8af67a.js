/*!
 * rcfm 0.2.4 | React iife | https://jilinxiangyun.com
 * Copyright 2021 JLxiangyun | MIT license
 */
(()=>{var Et=Object.create;var O=Object.defineProperty,Nt=Object.defineProperties,Pt=Object.getOwnPropertyDescriptor,It=Object.getOwnPropertyDescriptors,Ft=Object.getOwnPropertyNames,Je=Object.getOwnPropertySymbols,Bt=Object.getPrototypeOf,Ke=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable;var Qe=(e,o,t)=>o in e?O(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,s=(e,o)=>{for(var t in o||(o={}))Ke.call(o,t)&&Qe(e,t,o[t]);if(Je)for(var t of Je(o))Rt.call(o,t)&&Qe(e,t,o[t]);return e},b=(e,o)=>Nt(e,It(o)),kt=e=>O(e,"__esModule",{value:!0});var n=e=>{if(typeof require!="undefined")return require(e);throw new Error('Dynamic require of "'+e+'" is not supported')};var Tt=(e,o,t)=>{if(o&&typeof o=="object"||typeof o=="function")for(let r of Ft(o))!Ke.call(e,r)&&r!=="default"&&O(e,r,{get:()=>o[r],enumerable:!(t=Pt(o,r))||t.enumerable});return e},a=e=>Tt(kt(O(e!=null?Et(Bt(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);(()=>{let e=window.require,o=t=>({"rcfm/helper":{UI:window.ReactiveForm.UI},react:window.React,"react-dom":window.ReactDOM,"prop-types":window.PropTypes})[t];window.require=t=>e&&e(t)||o(t)})();var f=a(n("rcfm/helper"));var I=a(n("react")),Xe=a(n("rcfm/helper"));function A(e={}){let{value:o,parseValue:t,onChange:r,debounce:m}=e,[i,u]=(0,I.useState)(o),[p,c]=(0,I.useState)(o),[l,d]=(0,I.useState)(null),h=g=>{t&&(g=t(g)),c(g),l?l.run(g):r&&r(g)};return o!==i&&(u(o),c(o)),(0,I.useEffect)(()=>{if(!(l||!r||!m))return d(Xe.UI.Debouncer.create({runner:r,interval:m})),()=>{!l||(l.abort(),d(null))}},[l,r,m]),{value:p,onChange:h}}var Ye=a(n("rcfm")),Ze=a(n("react"));function W(e=""){let o=(0,Ze.useState)((0,Ye.guid)())[0];return e||o}var D=a(n("react"));function St(e){let[o,t]=(0,D.useState)(!1);return(0,D.useEffect)(()=>{t(!0);let r=null;return e!==1/0&&(r=setTimeout(()=>t(!1),e)),()=>{clearTimeout(r),t(!1)}},[e]),o}var Se=St;var L=a(n("react"));function jt(e,o={}){o||(o={});let{id:t,prop:r}=o,[m,i]=(0,L.useState)(_e(e,o));return(0,L.useEffect)(()=>{if(!!t)return e.subscribe({id:t},()=>{i(_e(e,r?{id:t,prop:r}:{id:t}))})},[e,t,r]),m}function _e(e,o){return e.get(o,{include:["raw","error"]})}var je=jt;var et=a(n("rcfm/helper")),tt=a(n("react"));function M(e={}){let t=et.UI.Icon.getProps(e);return tt.default.createElement("i",s({},t))}var Ge=a(n("rcfm/helper")),F=a(n("react"));function q(e={}){let o=Ge.UI.Button.getProps,t=Ge.UI.use("React.Icon"),r=o(e),m=r.icon;return F.default.createElement("button",s({},r),(()=>m.name?m.position==="middle"?F.default.createElement(t,{name:m.name}):F.default.createElement(F.default.Fragment,null,F.default.createElement(t,{name:m.name}),r.children):r.children)())}var ot=a(n("rcfm/helper")),rt=a(n("react"));function H(e={}){let t=ot.UI.Button.Group.getProps(e);return rt.default.createElement("div",s({},t),t.children)}var ye=a(n("rcfm/helper")),nt=a(n("react"));function $(e={}){let o=ye.UI.Alert.getProps,t=ye.UI.React.hooks.useTimer,r=o(e),m=t(r.dismiss);return delete r.dismiss,m?nt.default.createElement("div",s({},r),r.children):null}var at=a(n("rcfm/helper")),it=a(n("react"));function z(e={}){let t=at.UI.Alert.Title.getProps(e);return it.default.createElement("h6",s({},t),t.children)}var lt=a(n("rcfm/helper")),mt=a(n("react"));function J(e={}){let t=lt.UI.Alert.Text.getProps(e);return mt.default.createElement("p",s({},t),t.children)}var Ue=a(n("rcfm/helper")),B=a(n("react"));function K(e={}){let o=Ue.UI.Tabs.getProps,t=Ue.UI.Tabs.activateClass,r=o(e),{title:m,labels:i,activeIndex:u,onSwitch:p,classNames:c}=r;return delete r.title,delete r.labels,delete r.activeIndex,delete r.onSwitch,delete r.classNames,B.default.createElement("div",s({},r),B.default.createElement("div",{className:c.header},m&&B.default.createElement("h6",{className:c.title},m),i.map((l,d)=>B.default.createElement("label",{key:l,className:t(c.label,d,u),onClick:()=>p&&p(d)},l))),i.map((l,d)=>B.default.createElement("div",{key:l,className:t(c.pane,d,u)},e.children[d])))}function Q(e={}){return e.children}var st=a(n("rcfm/helper")),y=a(n("react"));function X(e={}){let o=st.UI.Form.Field.getProps,{wrapperProps:t,labelProps:r,hintProps:m,errorProps:i}=o(e);return y.default.createElement("div",s({},t),r.label&&y.default.createElement("label",{className:r.className},r.label),e.children,i.error&&y.default.createElement("p",{className:i.className},i.error.map(u=>u+" ")),m.hint&&!i.error&&y.default.createElement("p",{className:m.className},m.hint))}var Y=a(n("rcfm/helper")),we=a(n("react"));function Z(e={}){let o=Y.UI.Form.NumberInput.getProps,t=Y.UI.React.hooks.useNonblankName,r=Y.UI.React.hooks.useDebounceOnChange,{wrapperProps:m,inputProps:i}=o(e),u=t(i.name),{value:p,onChange:c}=r({value:i.value,debounce:i.debounce,onChange:i.onChange,parseValue:l=>l.target.value.length?Number(l.target.value):NaN});return isNaN(p)&&(p=""),Object.assign(i,{name:u,value:p,onChange:c}),we.default.createElement("div",s({},m),we.default.createElement("input",s({},i)))}var _=a(n("rcfm/helper")),ee=a(n("react"));function te(e={}){let o=_.UI.Form.TextInput.getProps,t=_.UI.React.hooks.useNonblankName,r=_.UI.React.hooks.useDebounceOnChange,{multiline:m,inputProps:i,wrapperProps:u}=o(e),p=t(i.name),{value:c,onChange:l}=r({debounce:i.debounce,value:i.value,onChange:i.onChange,parseValue:d=>d.target.value});return Object.assign(i,{name:p,value:c,onChange:l}),ee.default.createElement("div",s({},u),m?ee.default.createElement("textarea",s({},i)):ee.default.createElement("input",s({},i)))}var oe=a(n("rcfm/helper")),x=a(n("react"));function re(e={}){let o=oe.UI.Form.SingleSelect.getProps,t=oe.UI.Form.SingleSelect.findLabel,r=oe.UI.React.hooks.useNonblankName,m=o(e),{inputProps:i,wrapperProps:u,includeBlank:p,value:c,options:l}=m,{disabled:d,readOnly:h,onChange:g,placeholder:P}=i,E=t(c,l),[S,V]=(0,x.useState)(E);g&&S!==E&&V(E);let xt=r(i.name);return Object.assign(i,{name:xt,value:c,onChange:j=>{let G=l[j.target.selectedIndex-1];V(G?G.label:""),c=G==null?void 0:G.value,g&&g(c)}}),x.default.createElement("div",s({},u),x.default.createElement("select",s({},i),x.default.createElement("option",{className:"rcfm-fmtag",style:{display:p?"initial":"none"}}),l.map(j=>x.default.createElement("option",{className:"rcfm-fmtag",key:j.value,value:j.value},j.label))),x.default.createElement("input",{className:"rcfm-fmtag",tabIndex:-1,value:S,onChange:()=>{},placeholder:P,disabled:d,readOnly:h}))}var Ve=a(n("rcfm/helper")),ne=a(n("react"));function ae(e={}){let o=Ve.UI.Form.MultipleSelect.getProps,t=Ve.UI.React.hooks.useNonblankName,{inputProps:r,wrapperProps:m,options:i,value:u}=o(e),p=r.onChange,c=t(r.name),l=p?d=>{let[h,g]=[[],Array.from(d.target.options)];g.forEach((P,E)=>P.selected&&h.push(i[E].value)),p(h)}:null;return Object.assign(r,{name:c,onChange:l,[l?"value":"defaultValue"]:u}),ne.default.createElement("div",s({},m),ne.default.createElement("select",s({},r),i.map(d=>ne.default.createElement("option",{className:"rcfm-fmtag",key:d.value,value:d.value},d.label))))}var ie=a(n("rcfm/helper")),le=a(n("react"));function me(e={}){let o=ie.UI.Form.Checkboxes.getProps,t=ie.UI.Form.Checkboxes.getNewValue,r=ie.UI.React.hooks.useNonblankName,{inputProps:m,wrapperProps:i,value:u,options:p}=o(e),c=r(m.name),l=m.onChange;return le.default.createElement("div",s({},i),p.map(d=>le.default.createElement("label",{className:"rcfm-fmtag",key:d.value},le.default.createElement("input",s({},b(s({},m),{name:c,value:d.value,[l?"checked":"defaultChecked"]:u.includes(d.value),onChange:l?h=>{l(t(h,u,d.value))}:null}))),d.label)))}var Oe=a(n("rcfm/helper")),se=a(n("react"));function ce(e={}){let o=Oe.UI.Form.Radios.getProps,t=Oe.UI.React.hooks.useNonblankName,{inputProps:r,wrapperProps:m,value:i,options:u}=o(e),p=t(r.name),c=r.onChange;return se.default.createElement("div",s({},m),u.map(l=>se.default.createElement("label",{className:"rcfm-fmtag",key:l.value},se.default.createElement("input",s({},b(s({},r),{name:p,value:l.value,[c?"checked":"defaultChecked"]:i===l.value,onChange:c?()=>c(l.value):null}))),l.label)))}var ut=a(n("react"));var Ae=a(n("rcfm/helper")),ct=a(n("react"));function R(e={}){let o=Ae.UI.DataTypeEditor.Object.getProps,t=Ae.UI.use("React.Form.TextInput");return ct.default.createElement(t,s({},o(e)))}function ue(e={}){return ut.default.createElement(R,s({},e))}var We=a(n("rcfm/helper")),pt=a(n("react"));function pe(e={}){let o=We.UI.DataTypeEditor.Boolean.getProps,t=We.UI.use("React.Form.Radios");return pt.default.createElement(t,s({},o(e)))}var De=a(n("rcfm/helper")),dt=a(n("react"));function de(e={}){let o=De.UI.DataTypeEditor.Number.getProps,t=De.UI.use("React.Form.NumberInput");return dt.default.createElement(t,s({},o(e)))}var Le=a(n("rcfm/helper")),ft=a(n("react"));function fe(e={}){let o=Le.UI.DataTypeEditor.String.getProps,t=Le.UI.use("React.Form.TextInput");return ft.default.createElement(t,s({},o(e)))}var Me=a(n("rcfm/helper")),qe=a(n("react"));function he(e={}){let o=Me.UI.FormValidationEditor.getProps,t=Me.UI.use("React.FormValidationEditor.Item"),{reactive:r,member:m,value:i,actions:u,onChange:p}=o(e);return qe.default.createElement("div",{className:"rcfm-form-validation-editor"},i.map((c,l)=>qe.default.createElement(t,{key:l,reactive:r,member:m,value:c,actions:u,onChange:d=>p(b(s({},d),{index:l}))})))}var U=a(n("rcfm/helper")),N=a(n("react"));function ge(e={}){let o=U.UI.use("React.Button"),t=U.UI.use("React.ButtonGroup"),r=U.UI.use("React.FormValidationEditor.ItemName"),m=U.UI.use("React.FormValidationEditor.ItemRule"),{reactive:i,member:u,value:p,onChange:c,actions:l}=e;return N.default.createElement("div",{className:"rcfm-form-validation-editor-item"},N.default.createElement(r,{reactive:i,member:u,value:p,onChange:c}),p.name?N.default.createElement(m,{reactive:i,member:u,value:p,onChange:c}):null,l.includes("delete")||l.includes("append")?N.default.createElement(t,null,l.includes("delete")?N.default.createElement(o,{color:"danger",icon:"cross",onClick:()=>c({action:"delete"})}):null,l.includes("append")?N.default.createElement(o,{color:"secondary",icon:"plus",onClick:()=>c({action:"append"})}):null):null)}var He=a(n("rcfm/helper")),ht=a(n("react"));function be(e={}){let o=He.UI.FormValidationEditor.getValidators,t=He.UI.use("React.Form.SingleSelect"),{reactive:r,member:m,value:i,onChange:u}=e,p=o({reactive:r,member:m});return ht.default.createElement(t,{includeBlank:!1,value:i.name,options:p,onChange:c=>u({action:"update",name:c})})}var gt=a(n("rcfm")),$e=a(n("rcfm/helper")),bt=a(n("react"));function ve(e={}){let o=$e.UI.FormValidationEditor.getRuleType,{reactive:t,member:r,value:m,onChange:i}=e,u=o({reactive:t,member:r,value:m});if(!u)return null;let p=gt.Struct.string.capitalize(m.name),c=$e.UI.try([`React.FormValidationEditor.ItemRule.${p}`,`React.DataTypeEditor.${u}`]);return bt.default.createElement(c,{reactive:t,member:r,value:m.rule,onChange:l=>i({action:"update",rule:l})})}var Ce=a(n("rcfm/helper")),xe=a(n("react"));function Ee(e={}){let o=Ce.UI.FormConditionEditor.getProps,t=Ce.UI.use("React.FormConditionEditor.WhenBranch"),r=Ce.UI.use("React.FormConditionEditor.ElseBranch"),{reactive:m,member:i,branches:u,ResultComponent:p,onChange:c}=o(e);return xe.default.createElement("div",{className:"rcfm-form-condition-editor"},u.whens.map((l,d)=>xe.default.createElement(t,{key:d,reactive:m,member:i,value:l,ResultComponent:p,onChange:h=>c(b(s({},h),{branchIndex:d}))})),xe.default.createElement(r,{reactive:m,member:i,value:u.else,ResultComponent:p,onChange:c}))}var vt=a(n("rcfm")),Ne=a(n("react"));function Pe(e={}){let{value:o,onChange:t,ResultComponent:r}=e;return Ne.default.createElement("div",{className:"rcfm-form-condition-editor-else-branch"},Ne.default.createElement("h6",{className:"rcfm-form-condition-editor-branch-title"},vt.I18n.global.t("formConditionEditor.elseBranch.resultTitle")),Ne.default.createElement(r,{value:o.result,onChange:m=>t({target:"else",action:"update",result:m})}))}var w=a(n("rcfm")),Ie=a(n("rcfm/helper")),C=a(n("react"));function Fe(e={}){let o=Ie.UI.use("React.Button"),t=Ie.UI.use("React.ButtonGroup"),r=Ie.UI.use("React.FormConditionEditor.WhenBranch.Rule"),{reactive:m,member:i,value:u,onChange:p,ResultComponent:c}=e;return C.default.createElement("div",{className:"rcfm-form-condition-editor-when-branch"},C.default.createElement("h6",{className:"rcfm-form-condition-editor-branch-title"},w.I18n.global.t("formConditionEditor.whenBranch.title")),u.rules.map((l,d)=>C.default.createElement(r,{key:d,reactive:m,member:i,value:l,onChange:h=>p(b(s({},h),{ruleIndex:d}))})),C.default.createElement("h6",{className:"rcfm-form-condition-editor-branch-title"},w.I18n.global.t("formConditionEditor.whenBranch.resultTitle")),C.default.createElement(c,{value:u.result,onChange:l=>p({target:"when",action:"update",result:l})}),C.default.createElement(t,{fluid:!0},C.default.createElement(o,{color:"danger",onClick:()=>p({target:"when",action:"delete"})},w.I18n.global.t("formConditionEditor.whenBranch.delete")),C.default.createElement(o,{color:"secondary",onClick:()=>p({target:"when",action:"append"})},w.I18n.global.t("formConditionEditor.whenBranch.add"))))}var k=a(n("rcfm/helper")),v=a(n("react"));function Be(e={}){let[o,t,r,m,i]=[k.UI.use("React.FormConditionEditor.WhenBranch.RuleLogic"),k.UI.use("React.FormConditionEditor.WhenBranch.RuleProvider"),k.UI.use("React.FormValidationEditor.Item"),k.UI.use("React.ButtonGroup"),k.UI.use("React.Button")],{reactive:u,member:p,value:c,onChange:l}=e,d=u.schema.reference.parse(c.expression.value);return v.default.createElement("div",{className:"rcfm-form-condition-editor-when-branch-rule"},v.default.createElement("div",{className:"rcfm-form-condition-editor-when-branch-rule-elements"},c.logic?v.default.createElement(o,{reactive:u,member:p,value:c,onChange:l}):null,v.default.createElement(t,{reactive:u,member:p,value:c,onChange:l}),v.default.createElement(m,null,v.default.createElement(i,{color:"danger",icon:"cross",onClick:()=>l({target:"rule",action:"delete"})}),v.default.createElement(i,{color:"secondary",icon:"plus",onClick:()=>l({target:"rule",action:"append"})}))),c.expression.value?v.default.createElement("div",{className:"rcfm-form-condition-editor-when-branch-rule-elements"},v.default.createElement(r,{reactive:u,member:d,value:c.expression,actions:["update"],onChange:h=>l(b(s({},h),{target:"rule",action:"update"}))})):null)}var ze=a(n("rcfm/helper")),Ct=a(n("react"));function Re(e={}){let o=ze.UI.FormConditionEditor.getLogics,t=ze.UI.use("React.Form.SingleSelect"),{value:r,onChange:m}=e,i=o();return Ct.default.createElement(t,{className:"rcfm-form-condition-editor-when-branch-rule-logic",includeBlank:!1,options:i,value:r.logic,onChange:u=>m({target:"rule",action:"update",logic:u})})}var T=a(n("rcfm/helper")),ke=a(n("react"));function Te(e={}){var S;let o=T.UI.FormConditionEditor.splitProvider,t=T.UI.FormConditionEditor.joinProvider,r=T.UI.FormConditionEditor.getProviders,m=T.UI.React.hooks.useReactive,i=T.UI.use("React.Form.SingleSelect"),{reactive:u,member:p,value:c,onChange:l}=e,[d,h]=(0,ke.useState)(r({reactive:u,member:p})),g=()=>h(r({reactive:u,member:p})),P=u.schema.reference.parse(c.expression.value),E=(S=m(u,P))==null?void 0:S.value;return ke.default.createElement(i,{className:"rcfm-form-condition-editor-when-branch-rule-provider",key:E,includeBlank:!1,options:d,value:t(P),onFocus:g,onChange:V=>g(l({target:"rule",action:"update",value:u.schema.reference.stringify(o(V),{format:"interpolation"})}))})}f.UI.React={hooks:{useDebounceOnChange:A,useNonblankName:W,useTimer:Se,useReactive:je}};f.UI.install({name:"React.Icon",Component:M});f.UI.install({name:"React.Alert",Component:$});f.UI.install({name:"React.AlertTitle",Component:z});f.UI.install({name:"React.AlertText",Component:J});f.UI.install({name:"React.Tabs",Component:K});f.UI.install({name:"React.TabPane",Component:Q});f.UI.install({name:"React.Button",Component:q});f.UI.install({name:"React.ButtonGroup",Component:H});f.UI.install({name:"React.Form.Field",Component:X});f.UI.install({name:"React.Form.NumberInput",Component:Z});f.UI.install({name:"React.Form.TextInput",Component:te});f.UI.install({name:"React.Form.SingleSelect",Component:re});f.UI.install({name:"React.Form.MultipleSelect",Component:ae});f.UI.install({name:"React.Form.Checkboxes",Component:me});f.UI.install({name:"React.Form.Radios",Component:ce});f.UI.install({name:"React.DataTypeEditor.Array",Component:ue});f.UI.install({name:"React.DataTypeEditor.Boolean",Component:pe});f.UI.install({name:"React.DataTypeEditor.Number",Component:de});f.UI.install({name:"React.DataTypeEditor.Object",Component:R});f.UI.install({name:"React.DataTypeEditor.String",Component:fe});f.UI.install({name:"React.FormValidationEditor",Component:he});f.UI.install({name:"React.FormValidationEditor.Item",Component:ge});f.UI.install({name:"React.FormValidationEditor.ItemName",Component:be});f.UI.install({name:"React.FormValidationEditor.ItemRule",Component:ve});f.UI.install({name:"React.FormConditionEditor",Component:Ee});f.UI.install({name:"React.FormConditionEditor.ElseBranch",Component:Pe});f.UI.install({name:"React.FormConditionEditor.WhenBranch",Component:Fe});f.UI.install({name:"React.FormConditionEditor.WhenBranch.Rule",Component:Be});f.UI.install({name:"React.FormConditionEditor.WhenBranch.RuleLogic",Component:Re});f.UI.install({name:"React.FormConditionEditor.WhenBranch.RuleProvider",Component:Te});})();
//# sourceMappingURL=rcfm.react.iife.min.js-f8d1a35b.map
