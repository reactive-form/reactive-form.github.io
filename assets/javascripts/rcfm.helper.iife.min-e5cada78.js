/*!
 * rcfm 1.0.0-beta.0 | Helper iife | https://reactive-form.github.io/
 * Copyright 2021 - 2022 JLxiangyun | MIT license
 */
(()=>{var Be=Object.create;var L=Object.defineProperty,Ae=Object.defineProperties,Re=Object.getOwnPropertyDescriptor,$e=Object.getOwnPropertyDescriptors,ke=Object.getOwnPropertyNames,le=Object.getOwnPropertySymbols,Me=Object.getPrototypeOf,ie=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var G=(e,t,r)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T=(e,t)=>{for(var r in t||(t={}))ie.call(t,r)&&G(e,r,t[r]);if(le)for(var r of le(t))Le.call(t,r)&&G(e,r,t[r]);return e},I=(e,t)=>Ae(e,$e(t)),Ve=e=>L(e,"__esModule",{value:!0});var g=e=>{if(typeof require!="undefined")return require(e);throw new Error('Dynamic require of "'+e+'" is not supported')};var _e=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of ke(t))!ie.call(e,l)&&l!=="default"&&L(e,l,{get:()=>t[l],enumerable:!(r=Re(t,l))||r.enumerable});return e},y=e=>_e(Ve(L(e!=null?Be(Me(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var ne=(e,t,r)=>(G(e,typeof t!="symbol"?t+"":t,r),r);(()=>{let e=window.require;window.require=t=>e&&e(t)||{rcfm:window.ReactiveForm,"rcfm/helper":{UI:window.ReactiveForm.UI}}[t]})();function O(e={},t={}){return e._installer||(e._installer=T({},t))}var J=class{constructor(){O(this,{installed:{}})}static create(...t){return new J(...t)}},x=J;ne(x,"exceptions",{CONFLICTED_NAME:"UI_INSTALLER_CONFLICTED_NAME",NOT_FOUND:"UI_INSTALLER_TARGET_NOT_FOUND"});x.prototype.has=function(e=""){let t=O(this).installed;return e in t};var $=y(g("rcfm"));x.prototype.install=function(e={}){let t=e.name,r=e.Component||e.component||e.render,l="force"in e?e.force:!1;$.Type.mustbe.nonblankString(t,"UI installer name"),$.Type.mustbe.boolean(l,"UI installer force option"),$.Type.mustbe.function(r,"UI installer component");let i=O(this).installed;!l&&t in i&&$.Exception.raise({type:x.exceptions.CONFLICTED_NAME,message:`Componet '${t}' has been occupied.
             Please set 'force' to true if the existed
             component should be replaced.`}),i[t]={name:t,force:l,render:r}};var oe=y(g("rcfm"));x.prototype.use=function(e=""){let t=O(this).installed;if(e in t)return t[e].render;oe.Exception.raise({type:x.exceptions.NOT_FOUND,message:`Component '${e}' is not installed.`})};var V=y(g("rcfm"));x.prototype.try=function(e=[]){V.Type.isnt.array(e)&&(e=[e]);let t=null;if(!e.length)return t=null;if(e.some(l=>{try{return t=this.use(l),!0}catch(i){return t=null,!1}}),t)return t;let r=`None of Component '${JSON.stringify(e)}' is installed.`;V.Exception.raise({type:x.exceptions.NOT_FOUND,message:r})};var C=y(g("rcfm"));function De(e){C.Context.mustbeContext(e)}function Ue(e){C.Type.mustbe.object(e),C.Type.mustbe.nonblankString(e.id)}function ze(e){C.Exception.mustbeException(e)}function Z(e={},t="",r={}){let l=[void 0,null],i="default"in r?r.default:void 0,n="dataType"in r?r.dataType:null,o="required"in r?r.required:!1,a="validate"in r?r.validate:null,u=(()=>C.Type.within({type:"Boolean",types:n})?t in e?l.includes(e[t])?!0:e[t]:i:l.includes(e[t])?i:e[t])();return o&&l.includes(u)&&C.Exception.raise(`${t} is required.`),l.includes(u)||(n&&C.Type.mustWithin({type:C.Type.get(u),types:n},`Data type of "${t}" must be within ${JSON.stringify(n)}`),t==="reactive"&&De(u),t==="member"&&Ue(u),t==="exception"&&ze(u),a&&a(u)),u}function s(e={},t={}){let r=Object.keys(t);return Object.assign({customProps:C.Struct.object.exclude(e,r)},C.Struct.object.from(r.map(l=>[l,Z(e,l,t[l])])))}var Y=y(g("rcfm"));function S(...e){return e.map(t=>{let r=Y.Type.is.object(t)&&t.root||"",l=Y.Type.is.object(t)?[t.klass]:[t];return l=l.flat(1/0).filter(i=>i),l.map(i=>r?`${r}-${i}`:i)}).flat(1/0).join(" ")}var K=y(g("rcfm"));var We={form:{boolean:{option:{true:"Yes",false:"No"}}}},ae=We;var Ge={form:{boolean:{option:{true:"\u662F",false:"\u5426"}}}},ue=Ge;K.I18n.global.define({en:{component:ae},zh:{component:ue}});var Q=K.I18n.global;var Dt=y(g("rcfm"));var Je=(()=>{function e(r={}){let l=s(r,{type:{dataType:"String",default:"button"},variant:{dataType:"String",default:""},color:{dataType:"String",default:"primary"},size:{dataType:"String",default:""},tabindex:{dataType:"String",default:""},onClick:{dataType:"Function",default:null},fluid:{dataType:"Boolean",default:!1},circle:{dataType:"Boolean",default:!1},active:{dataType:"Boolean",default:!1},disabled:{dataType:"Boolean",default:!1},icon:{dataType:["String","Boolean"],default:""},topIcon:{dataType:["String","Boolean"],default:""},leftIcon:{dataType:["String","Boolean"],default:""},rightIcon:{dataType:["String","Boolean"],default:""}});return l.disabled&&(l.onClick=null),l}function t(r={}){let{variant:l,color:i,size:n,circle:o,active:a,fluid:u,icon:p,topIcon:d,leftIcon:P,rightIcon:q}=e(r);return S({root:"rcfm-component-btn",klass:[l?`${l}-${i}`:`${i}`,n||"",u?"fluid":"",o?"circle":"",a?"active":""]},{root:"rcfm-component-btn-ico",klass:(()=>{if(p)return"middle";if(d)return"top";if(P)return"left";if(q)return"right"})()},r.className)}return{joinWrapperClass:t,getProps:e}})(),Ze=(()=>{function e(r={}){return s(r,{fluid:{type:"Boolean",default:!1},vertical:{type:"Boolean",default:!1}})}function t(r={}){let{vertical:l,fluid:i}=e(r);return S({root:"rcfm-component-btngroup",klass:[l?"y":"x",i?"fluid":""]},r.className)}return{joinWrapperClass:t,getProps:e}})(),se=I(T({},Je),{Group:Ze});var ce=y(g("rcfm"));var Ye=(()=>{function e(t={}){let r=s(t,{title:{dataType:"String",default:""},labels:{dataType:"Array",default:[]},activeIndex:{dataType:"Number",default:0,validate(n){ce.Type.mustbe.integer(n)}},onSwitch:{dataType:"Function",default:null}}),[l,i]=[0,r.labels.length-1];return r.activeIndex>i&&(r.activeIndex=i),r.activeIndex<l&&(r.activeIndex=l),r}return{getProps:e}})(),pe=Ye;var de=y(g("rcfm"));var Ke=(()=>{function e(n={}){let o=s(n,{required:{dataType:"Boolean",default:!1},size:{dataType:"String",default:""},label:{dataType:"String",default:""},hint:{dataType:"String",default:""},error:{dataType:["String","Array"],default:""}});return o.error=(()=>{let a=o.error;return de.Type.isnt.array(a)&&(a=[a]),a.flat(1/0).filter(u=>u).map(u=>u.message||u.name||u)})(),o}function t(n={}){let{size:o}=e(n);return S("rcfm-component-fmfield",{root:"rcfm-component-fmfield",klass:[o||""]},"rcfm-fmtag",n.className)}function r(n={}){let{size:o,required:a}=e(n);return S("rcfm-component-fmlabel",{root:"rcfm-component-fmlabel",klass:[o||"",a?"required":""]},"rcfm-fmtag")}function l(n={}){let{size:o}=e(n);return S("rcfm-component-fmhint",{root:"rcfm-component-fmhint",klass:[o||""]},"rcfm-fmtag")}function i(n={}){let{size:o}=e(n);return S("rcfm-component-fmerror",{root:"rcfm-component-fmerror",klass:[o||""]},"rcfm-fmtag")}return{getProps:e,joinWrapperClass:t,joinLabelClass:r,joinHintClass:l,joinErrorClass:i}})(),fe=Ke;var E=y(g("rcfm"));var B={id:{dataType:"String",default:""},name:{dataType:"String",default:""},invalid:{dataType:"Boolean",default:!1},disabled:{dataType:"Boolean",default:!1},readonly:{dataType:"Boolean",default:!1},size:{dataType:"String",default:""},onChange:{dataType:"Function",default:null}};function k(e={}){let{size:t,invalid:r}=s(e,B);return S({root:"rcfm-component-fm",klass:[t||"",r?"invalid":""]},"rcfm-fmtag",e.className)}var X=(()=>{function e(t={}){return s(t,I(T({},B),{type:{dataType:"String",default:""},value:{default:""},placeholder:{dataType:"String",default:""},multiline:{dataType:"Boolean",default:!1}}))}return{getProps:e,joinModifierClass:k}})(),ee=(()=>{function e(t={}){return s(t,I(T({},B),{value:{default:NaN},placeholder:{dataType:"String",default:""}}))}return{getProps:e,joinModifierClass:k}})(),me=(()=>{function e(t={}){return s(t,I(T({},B),{value:{default:""},options:{dataType:"Array",required:!0,validate(r){r.forEach(l=>{E.Type.mustbe.object(l)})}}}))}return{getProps:e,joinModifierClass:k}})(),be=(()=>{function e(r={}){let l=s(r,I(T({},B),{value:{default:[]},options:{dataType:"Array",required:!0,validate(i){i.forEach(n=>{E.Type.mustbe.object(n)})}}}));return E.Type.isnt.array(l.value)&&(l.value=[]),l}function t(r={}){let l=r.value.slice(),i="insert"in r?"insert":"remove",n=r[i];return i==="insert"&&l.push(n),i==="remove"&&(l=l.filter(o=>o!==n)),l}return{getProps:e,joinModifierClass:k,mutateValue:t}})(),ge=(()=>{function e(r={}){return s(r,I(T({},B),{value:{default:""},placeholder:{dataType:"String",default:""},includeblank:{dataType:"Boolean",default:!1},options:{dataType:"Array",required:!0,validate(l){l.forEach(i=>{E.Type.mustbe.object(i)})}}}))}function t(r={}){var l;return((l=r.options.find(i=>i.value===r.value))==null?void 0:l.label)||""}return{getProps:e,joinModifierClass:k,findLabel:t}})(),ye=(()=>{function e(t={}){let r=s(t,I(T({},B),{value:{default:[]},options:{dataType:"Array",required:!0,validate(l){l.forEach(i=>{E.Type.mustbe.object(i)})}}}));return E.Type.isnt.array(r.value)&&(r.value=[]),r}return{getProps:e,joinModifierClass:k}})();var he=(()=>{function e(){let t="component.form.boolean.option";return[{value:!0,label:Q.t(`${t}.true`)},{value:!1,label:Q.t(`${t}.false`)}]}return{getOptions:e}})(),ve=(()=>{function e(i){return r(i)}function t(i){return function(n){i&&i(l(n))}}function r(i){if([null,void 0,NaN].includes(i))return"";if(typeof i=="string")return i;try{return JSON.stringify(i)}catch(n){return String(i)}}function l(i){if(typeof i!="string")return i;if(i.match(/^\s*$/))return null;if(i!=="undefined"){if(i==="NaN")return NaN;if(i.match(/-\s*NaN/))return NaN;if(i==="Infinity")return 1/0;if(i.match(/-\s*Infinity/))return-1/0;try{return JSON.parse(i)}catch(n){return i}}}return{decorateValue:e,decorateOnChange:t}})();var Qe={Field:fe,TextInput:X,NumberInput:ee,Radios:me,Checkboxes:be,SingleSelect:ge,MultipleSelect:ye,String:X,Number:ee,Boolean:he,Object:ve},Te=Qe;var xe=y(g("rcfm"));var Xe=(()=>{function e(r={}){let l=s(r,{type:{dataType:"String",default:"info"},hint:{dataType:["String","Array"],default:[]},hintPosition:{dataType:"String",default:"bottom"},on:{dataType:"Boolean",default:!0}});return l.hint=(()=>{let i=l.hint;return xe.Type.isnt.array(i)&&(i=[i]),i.flat(1/0).filter(n=>n).map(n=>n.message||n.name||n)})(),l}function t(r={}){let{type:l,on:i}=e(r);return S({root:"rcfm-component-highlight",klass:[l,i?"":"off"]},r.className)}return{joinWrapperClass:t,getProps:e}})(),Se=Xe;var te=y(g("rcfm"));var et={member:{noProviders:"No referenceable objects",prop:{always:"Always",conditional:"Conditional",condition:{elseBranch:{resultTitle:"Else"},whenBranch:{title:"When",resultTitle:"Then",delete:"Delete Branch",add:"New Branch",logics:{and:"And",or:"Or"}}},options:{each:{labelLabel:"Label",valueLabel:"Value"}}},type:{fieldset:{label:"Fieldset"},textField:{label:"Text Field"},multilineTextField:{label:"Multiline Text"},numberField:{label:"Number Field"},radioField:{label:"Radio Field"},checkboxField:{label:"Checkbox Field"},singleSelectField:{label:"Single Select"},multipleSelectField:{label:"Multiple Select"},subform:{label:"Subform"},subformFieldset:{label:"Subform Fieldset"},subformTextField:{label:"Subform Text Field"},subformMultilineTextField:{label:"Subform Multiline Text"},subformNumberField:{label:"Subform Number Field"},subformRadioField:{label:"Subform Radio Field"},subformCheckboxField:{label:"Subform Checkbox Field"},subformSingleSelectField:{label:"Subform Single Select"},subformMultipleSelectField:{label:"Subform Multiple Select"}}},subform:{fieldset:{insert:"Insert A New Set",remove:"Delete The Above Set"}}},Ce=et;var tt={member:{noProviders:"\u6CA1\u6709\u53EF\u88AB\u5F15\u7528\u7684\u5BF9\u8C61",prop:{always:"\u603B\u662F",conditional:"\u6309\u6761\u4EF6",condition:{elseBranch:{resultTitle:"\u5426\u5219"},whenBranch:{title:"\u5F53",resultTitle:"\u5219",delete:"\u5220\u9664\u5206\u652F",add:"\u65B0\u589E\u5206\u652F",logics:{and:"\u4E14",or:"\u6216"}}},options:{each:{labelLabel:"\u9009\u9879\u6587\u5B57",valueLabel:"\u9009\u9879\u503C"}}},type:{fieldset:{label:"\u8F93\u5165\u9879\u96C6\u5408"},textField:{label:"\u5355\u884C\u6587\u672C"},multilineTextField:{label:"\u591A\u884C\u6587\u672C"},numberField:{label:"\u6570\u5B57\u8F93\u5165"},radioField:{label:"\u5355\u9879\u9009\u62E9"},checkboxField:{label:"\u591A\u9879\u9009\u62E9"},singleSelectField:{label:"\u4E0B\u62C9\u5355\u9009"},multipleSelectField:{label:"\u4E0B\u62C9\u591A\u9009"},subform:{label:"\u5B50\u8868\u5355"},subformFieldset:{label:"\u5B50\u8868\u5355\u8F93\u5165\u9879\u96C6\u5408"},subformTextField:{label:"\u5B50\u8868\u5355\u5355\u884C\u6587\u672C"},subformMultilineTextField:{label:"\u5B50\u8868\u5355\u591A\u884C\u6587\u672C"},subformNumberField:{label:"\u5B50\u8868\u5355\u6570\u5B57\u8F93\u5165"},subformRadioField:{label:"\u5B50\u8868\u5355\u5355\u9879\u9009\u62E9"},subformCheckboxField:{label:"\u5B50\u8868\u5355\u591A\u9879\u9009\u62E9"},subformSingleSelectField:{label:"\u5B50\u8868\u5355\u4E0B\u62C9\u5355\u9009"},subformMultipleSelectField:{label:"\u5B50\u8868\u5355\u4E0B\u62C9\u591A\u9009"}}},subform:{fieldset:{insert:"\u63D2\u5165\u65B0\u7684\u4E00\u7EC4",remove:"\u5220\u9664\u4E0A\u9762\u4E00\u7EC4"}}},Fe=tt;te.I18n.global.define({en:{section:Ce},zh:{section:Fe}});var A=te.I18n.global;var _=y(g("rcfm"));var rt=(()=>{function e(n={}){return s(n,{reactive:{required:!0},member:{required:!0},onAction:{dataType:"Function",default:r}})}function t(n={}){let{reactive:o,member:a,errors:u}=s(n,{reactive:{required:!0},member:{required:!0},errors:{dataType:"Object",default:{}}});return Object.keys(u).map(p=>{let d=o.schema.for({id:a.id,prop:p}).label;return u[p].map(P=>d?`${d}: ${P.message}`:P.message)})}function r(n={}){if(n.action==="delete"){let{reactive:o,id:a}=s(n,{reactive:{required:!0},id:{required:!0}});return o.delete({id:a})}else if(n.action==="update"){let{reactive:o,id:a,prop:u,value:p}=s(n,{reactive:{required:!0},id:{required:!0},prop:{required:!0},value:{required:!1}});return o.set({id:a,prop:u,value:p})}else if(n.action==="add"){let{reactive:o,parentId:a,props:u}=s(n,{reactive:{required:!0},parentId:{required:!0},props:{dataType:"Object",required:!0}});return o.add({parentId:a,props:u})}else _.Exception.raise({type:"MEMBER_UNSUPPORTED_ACTION",message:`Unsupported action ${n}.`})}function l(n={}){let{reactive:o,member:a}=s(n,{reactive:{required:!0},member:{required:!0}}),u=o.get({id:a.id,prop:"type"}),p=(_.Form.group(`${u}Child`)||[]).map(d=>d.type);return i(p)}function i(n=[]){return n.map(o=>{let a=o[0].toLowerCase()+o.slice(1);return{type:o,label:A.t(`section.member.type.${a}.label`)}})}return{getProps:e,errorMessages:t,onAction:r,getChildTypes:l}})(),D=rt;var Pe=y(g("rcfm"));var lt=(()=>{function e(o={}){return s(o,{reactive:{required:!0},onAction:{dataType:"Function",default:D.onAction},member:{required:!0,validate(a){Pe.Type.mustbe.nonblankString(a.prop,"Member prop")}}})}function t(o={}){let{reactive:a,member:u}=e(o);return a.schema.for(u).schemable}function r(o={}){let{reactive:a}=s(o,{reactive:{required:!0}});return a.schema.constructor.Condition.isCondition(o.value)}function l(o={}){let{reactive:a,member:u}=e(o);return o.conditional?[{when:[{}],then:a.schema.for(u).default},{else:a.schema.for(u).default}]:a.schema.for(u).default}function i(o={}){var d;let{reactive:a,member:u}=e(o),{validation:p}=a.schema.for(u);return p&&((d=p.find(P=>"dataType"in P))==null?void 0:d.dataType)||"Object"}function n(o={}){let{reactive:a,member:u}=e(o),{validation:p}=a.schema.for(u);return p?!!p.find(d=>"presence"in d):!1}return{getProps:e,getType:i,getDefault:l,isSchemable:t,isCondition:r,isRequired:n}})(),Ne=lt;var M=y(g("rcfm"));var it=(()=>{function e(c){return M.Type.is.function(c)?c():c}function t(c={},f={},h){let m=T({},f.else),v=f.whens.slice(),{target:j,action:b,branchIndex:N,result:H}=c;return j==="else"?"result"in c&&(m.result=H):j==="when"&&(b==="delete"?v.splice(N,1):b==="append"?v.splice(N+1,0,{rules:[{logic:"",expression:{}}],result:e(h)}):b==="update"&&"result"in c&&(v[N].result=H)),{whens:v,else:m}}function r(c={},f={}){let h=T({},f.else),m=f.whens.slice(),{action:v,branchIndex:j,ruleIndex:b,logic:N,name:H,rule:z,value:W}=c,F=m.slice()[j].rules;return v==="delete"?(F.splice(b,1),b===0&&F.length&&(F[0].logic="")):v==="append"?(N=b===-1?"":"and",F.splice(b+1,0,{logic:N,expression:{}})):v==="update"&&("logic"in c&&(F[b].logic=N),"rule"in c&&(F[b].expression.rule=z),"name"in c&&(F[b].expression.name=H,F[b].expression.rule=void 0),"value"in c&&(F[b].expression.value=W,F[b].expression.name=void 0,F[b].expression.rule=void 0)),{whens:m,else:h}}function l(c={}){let f=s(c,{reactive:{required:!0},member:{required:!0},ResultComponent:{dataType:"Function",required:!0},value:{dataType:"Array",default:[]},onChange:{dataType:"Function",default:null},exception:{default:null},defaultResult:{default:void 0}}),m=f.reactive.schema.constructor.Condition.extract(f.value);return M.Type.is.blank(m.else.result)&&(m.else={result:e(f.defaultResult)}),(M.Type.isnt.array(m.whens)||!m.whens.length)&&(m.whens=[{rules:[{logic:"",expression:{}}],result:e(f.defaultResult)}]),m.whens=m.whens.map(({rules:v,result:j})=>(v=v.length?v.map(({logic:b,expression:N})=>({logic:b,expression:f.reactive.validator.extractValidation(N)})):[{logic:"",expression:{}}],{rules:v,result:j})),f.value=m,f}function i(c={}){let{reactive:f,value:h,defaultResult:m,onChange:v}=s(c,{reactive:{required:!0},value:{dataType:"Object",default:{}},onChange:{dataType:"Function",default:null},defaultResult:{default:void 0}});return function(j={}){if(!v)return;h=(j.target==="rule"?r:t)(j,h,m);let N=f.schema.constructor.Condition;v(N.combine({else:h.else,whens:h.whens.map(({rules:H,result:z})=>(H=H.map(({logic:W,expression:F})=>({logic:W,expression:f.validator.combineValidation(F)})),{rules:H,result:z}))}))}}function n(){let c="section.member.prop.condition.whenBranch.logics";return[{value:"and",label:A.t(`${c}.and`)},{value:"or",label:A.t(`${c}.or`)}]}function o(c={}){let{reactive:f,member:h}=s(c,{reactive:{required:!0},member:{required:!0}});return(M.Form.providers(f,h)||[]).map(m=>({value:a(m),label:f.get({id:m.id,prop:"label"})}))}function a(c={}){return!c||!c.id||!c.prop?"":`${c.id}/${c.prop}`}function u(c=""){let[f,h]=c.split("/");return{id:f||"",prop:h||""}}function p(c={},f=""){var h;return!c||c.type!=="CONDITION_INVALID_CONDITION"?!1:f?((h=c==null?void 0:c.data)==null?void 0:h.dueto)===f:!0}function d(c={}){return p(c,"whens")}function P(c={}){return p(c,"rules")}function q(c={}){return p(c,"logic")}function w(c={}){return p(c,"provider")}function U(c={}){return p(c,"validation")}return{getProps:l,decorateOnChange:i,getLogics:n,getProviders:o,joinProvider:a,splitProvider:u,isConditionException:p,isWhensException:d,isRulesException:P,isLogicException:q,isProviderException:w,isValidationException:U}})(),Ie=it;var nt=(()=>{function e(t={}){return s(t,{reactive:{required:!0},member:{required:!0},exception:{default:null},value:{dataType:["Object","String"],default:null},onChange:{dataType:"Function",default:null}})}return{getProps:e}})(),qe=nt;var ot=(()=>{function e(r={}){let l=s(r,{reactive:{required:!0},member:{required:!0},exception:{default:null},value:{dataType:"Array",default:[]},onChange:{dataType:"Function",default:null}});return l.value.length||(l.value=[{}]),l}function t(r={}){let l=e(r);return function(i={}){if(!l.onChange)return;let n=l.value.slice(),{index:o,action:a,label:u,value:p}=i;a==="delete"?n.splice(o,1):a==="append"?n.splice(o+1,0,{label:"",value:""}):a==="update"&&("label"in i&&(n[o].label=u),"value"in i&&(n[o].value=p)),l.onChange(n)}}return{getProps:e,decorateOnChange:t}})(),je=ot;var R=y(g("rcfm"));var at=(()=>{function e(i={}){let n=s(i,{exception:{default:null},reactive:{required:!0},member:{required:!0},value:{dataType:"Array",default:[]},onChange:{dataType:"Function",default:null},actions:{dataType:"Array",default:["append","update","delete"]}});return n.value=n.value.slice(),n.value.length||(n.value=[{}]),n.value=n.value.map(o=>n.reactive.validator.extractValidation(o)),n}function t(i={}){let{reactive:n,value:o,onChange:a}=s(i,{reactive:{required:!0},onChange:{dataType:"Function",default:null},value:{dataType:"Array",default:[]}});return function(u={}){if(!a)return;o=o.slice();let{index:p,action:d,name:P,rule:q}=u;d==="delete"?o.splice(p,1):d==="append"?o.splice(p+1,0,{}):d==="update"&&("rule"in u&&(o[p].rule=q),"name"in u&&(o[p].name=P,o[p].rule=void 0)),a(o.map(w=>(w=n.validator.combineValidation(w),R.Struct.object.exclude(w,["valOf"]))))}}function r(i={}){let{reactive:n,member:o,scope:a}=s(i,{reactive:{required:!0},member:{required:!0},scope:{dataType:"String",validate(u){!["validation","condition"].includes(u)&&raise("The 'scope' prop must be within ['validation', 'condition']")}}});return(R.Form.validators(n,o,{scope:a})||[]).map(u=>({label:A.t(`validator.validators.${u.name}.label`),value:u.name}))}function l(i={}){var w;let{reactive:n,member:o,value:a}=s(i,{reactive:{required:!0},member:{required:!0},value:{dataType:"Object",required:!0}}),{name:u,rule:p}=a,{ruleType:d}=n.validator.get(u)||{};if(!d)return;if(R.Type.is.string(d)&&d!=="*")return d;let{validation:P}=n.schema.for({id:o.id,prop:"value"}),q=(w=(P||[]).find(U=>"dataType"in U))==null?void 0:w.dataType;return R.Type.is.string(q)&&q!=="*"?q:"Object"}return{getProps:e,decorateOnChange:t,getValidators:r,getRuleType:l}})(),Oe=at;var ut=I(T({},D),{Prop:Ne,Condition:Ie,Calculation:qe,Options:je,Validation:Oe}),we=ut;var st=(()=>{function e(r={}){let{reactive:l,member:i}=s(r,{reactive:{required:!0},member:{required:!0}}),n=i.id,o=l.schema.for({id:n,prop:"value"}),a=l.get({id:n,prop:"validation"});return!!(o.validation||[]).concat(a||[]).find(d=>"presence"in d)}function t(r={}){let{reactive:l,member:i}=s(r,{reactive:{required:!0},member:{required:!0}}),n=i.id;return!!(l.get({id:n,prop:"editable"})===!1||l.get({id:n,prop:"visible"})===!1||l.get({id:n,prop:"calculation"},{include:"raw"}).raw.value)}return{isRequired:e,isReadonly:t}})(),He=st;var re=y(g("rcfm"));var ct=(()=>{function e(r={}){let l=re.Form.group("Field");if(!l)return;let{installer:i,namespace:n}=s(r,{installer:{required:!0},namespace:{required:!0,dataType:"String"}});l.forEach(o=>{let a=`${n}${o.type}`;!i.has(a)||i.install({name:`${n}Subform${o.type}`,Component:i.use(a)})})}function t(r={}){let{reactive:l,collection:i}=s(r,{reactive:{required:!0},collection:{dataType:"Array"}});if(!i||!i.length)return[];let n=re.Form.group("SubformField");if(!n)return[];let o=n.map(a=>a.type);return i.filter(a=>o.includes(l.get({id:a.id,prop:"type"})))}return{installFieldComponents:e,collectFields:t}})(),Ee=ct;function pt(){let e=x.create();return e.getProp=Z,e.getProps=s,e.joinClass=S,e.Component={Button:se,Tabs:pe,Form:Te,Highlight:Se},e.Section={Member:we,Field:He,Subform:Ee},e}var dt=pt();typeof window!="undefined"&&window.ReactiveForm&&(window.ReactiveForm.UI=dt);})();
//# sourceMappingURL=rcfm.helper.iife.min.js-4f36e1b5.map
