/*!
 * rcfm 0.3.0-alpha.0 | Helper iife | https://jilinxiangyun.com
 * Copyright 2021 JLxiangyun | MIT license
 */
(()=>{var Re=Object.create;var L=Object.defineProperty,Ve=Object.defineProperties,Ue=Object.getOwnPropertyDescriptor,Me=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertyNames,Q=Object.getOwnPropertySymbols,Ge=Object.getPrototypeOf,X=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable;var V=(e,t,r)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))X.call(t,r)&&V(e,r,t[r]);if(Q)for(var r of Q(t))Je.call(t,r)&&V(e,r,t[r]);return e},d=(e,t)=>Ve(e,Me(t)),We=e=>L(e,"__esModule",{value:!0});var p=e=>{if(typeof require!="undefined")return require(e);throw new Error('Dynamic require of "'+e+'" is not supported')};var Ke=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Ze(t))!X.call(e,i)&&i!=="default"&&L(e,i,{get:()=>t[i],enumerable:!(r=Ue(t,i))||r.enumerable});return e},b=e=>Ke(We(L(e!=null?Re(Ge(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var ee=(e,t,r)=>(V(e,typeof t!="symbol"?t+"":t,r),r);window.require||(window.require=e=>({rcfm:window.ReactiveForm})[e]);function T(e={},t={}){return e._installer||(e._installer=c({},t))}var U=class{constructor(){T(this,{installed:{}})}static create(...t){return new U(...t)}},h=U;ee(h,"exceptions",{CONFLICTED_NAME:"UI_INSTALLER_CONFLICTED_NAME",NOT_FOUND:"UI_INSTALLER_TARGET_NOT_FOUND"});h.prototype.has=function(e=""){let t=T(this).installed;return e in t};var H=b(p("rcfm"));h.prototype.install=function(e={}){let t=e.name,r=e.Component||e.component||e.render,i="force"in e?e.force:!1;H.Type.mustbe.nonblankString(t,"UI installer name"),H.Type.mustbe.boolean(i,"UI installer force option"),H.Type.mustbe.function(r,"UI installer component");let l=T(this).installed;!i&&t in l&&H.Exception.raise({type:h.exceptions.CONFLICTED_NAME,message:`Componnet/Section '${t}' is already existed.
             Please set 'force' to true if the existed
             component/section should be replaced.`}),l[t]={name:t,force:i,render:r}};var te=b(p("rcfm"));h.prototype.use=function(e=""){let t=T(this).installed;if(e in t)return t[e].render;te.Exception.raise({type:h.exceptions.NOT_FOUND,message:`Component/Section '${e}' is not installed.`})};var _=b(p("rcfm"));h.prototype.try=function(e=[]){_.Type.isnt.array(e)&&(e=[e]);let t=null;if(!e.length)return t=null;if(e.some(i=>{try{return t=this.use(i),!0}catch(l){return t=null,!1}}),t)return t;let r=`None of Component/Section '${JSON.stringify(e)}' is installed.`;_.Exception.raise({type:h.exceptions.NOT_FOUND,message:r})};var M=b(p("rcfm"));function y(e={},t={}){return e._debouncer||(e._debouncer=c({},t))}var w=class{constructor(t={}){let r=t.runner,i="interval"in t?t.interval:100;M.Type.mustbe.function(r,"Debouncer runner"),M.Type.mustbe.positiveInteger(i,"Debouncer interval"),y(this,{timer:null,interval:i,runner:r,runnerArgs:[]})}static create(...t){return new w(...t)}};w.prototype.abort=function(e=!0){let{timer:t,runner:r}=y(this);t!==null&&(clearTimeout(t),e&&r(...y(this).runnerArgs),y(this).runnerArgs=[],y(this).timer=null)};w.prototype.run=function(...e){let{runner:t,interval:r}=y(this);this.abort(!1),y(this).runnerArgs=e,y(this).timer=setTimeout(()=>{t(...y(this).runnerArgs),y(this).runnerArgs=[],y(this).timer=null},r)};var N=b(p("rcfm"));function Ye(e={}){return N.Context.mustbeContext(e.reactive),e.reactive}function Qe(e={}){return N.Type.mustbe.object(e.member),N.Type.mustbe.nonblankString(e.member.id),e.member}function Xe(e={}){return N.Exception.mustbeException(e.exception),e.exception}function et(e={}){return N.Type.mustbe.function(e.onChange),e.onChange}function n(e={},t="",r={}){let i="required"in r?r.required:!1,l="default"in r?r.default:void 0,o="validate"in r?r.validate:null;if(i)N.Type.musntbe.blank(e[t],`Prop "${t}"`,{deep:!1});else if(N.Type.is.blank(e[t],{deep:!1}))return l;let a=(()=>t==="reactive"?Ye(e):t==="member"?Qe(e):t==="exception"?Xe(e):t==="onChange"?et(e):N.Type.is.blank(e[t],{deep:!1})?l:e[t])();return o&&o(a),a}function s(...e){return e.flat(1/0).filter(t=>t).join(" ")}var B=b(p("rcfm"));function tt(e={}){let t=n(e,"type",{default:"info"}),r=n(e,"dismiss",{default:1/0});B.Type.mustbe.number(r);let i=s(`rcfm-alert-${t}`,e.className);return c({className:i,dismiss:r},B.Struct.object.exclude(e,["className","type","dismiss"]))}var rt=(()=>{function e(t={}){let r=s("rcfm-alert-title",t.className);return d(c({},t),{className:r})}return{getProps:e}})(),it=(()=>{function e(t={}){let r=s("rcfm-alert-text",t.className);return d(c({},t),{className:r})}return{getProps:e}})(),lt={Title:rt,Text:it,getProps:tt},re=lt;var j=b(p("rcfm"));function nt(e={}){let t=n(e,"type",{default:"button"}),r=n(e,"variant",{default:""}),i=n(e,"color",{default:"primary"}),l=n(e,"size",{default:""}),o="fluid"in e&&e.fluid!==!1,a="circle"in e&&e.circle!==!1,u="active"in e&&e.active!==!1,m="disabled"in e&&e.disabled!==!1,f=n(e,"onClick",{default:null}),v=ot(e),g=s(e.className,[r?`rcfm-btn-${r}-${i}`:`rcfm-btn-${i}`,l?`rcfm-btn-${l}`:"",o?"rcfm-btn-fluid":"",a?"rcfm-btn-circle":"",u?"rcfm-btn-active":"",v.position?`rcfm-btn-ico-${v.position}`:""]);return m&&(f=null),{iconProps:v,buttonProps:d(c({},j.Struct.object.exclude(e,["type","variant","color","size","fluid","circle","active","disabled","onClick","icon","topIcon","leftIcon","rightIcon"])),{type:t,className:g,disabled:m,onClick:f})}}function ot(e={}){return"icon"in e?{position:"middle",name:j.Type.is.string(e.icon)?e.icon:""}:"topIcon"in e?{position:"top",name:j.Type.is.string(e.topIcon)?e.topIcon:""}:"leftIcon"in e?{position:"left",name:j.Type.is.string(e.leftIcon)?e.leftIcon:""}:"rightIcon"in e?{position:"right",name:j.Type.is.string(e.rightIcon)?e.rightIcon:""}:{}}var at=(()=>{function e(t={}){let r="vertical"in t?"vertical":"horizontal",i="fluid"in t&&t.fluid!==!1,l=s(t.className,[r==="horizontal"?"rcfm-btngroup-x":"rcfm-btngroup-y",i?"rcfm-btngroup-fluid":""]);return d(c({},j.Struct.object.exclude(t,["vertical","fluid"])),{className:l})}return{getProps:e}})(),ut={Group:at,getProps:nt},ie=ut;var le=b(p("rcfm"));function ct(e={}){let t=n(e,"name",{required:!0}),r=s(e.className,`rcfm-ico-${t}`);return d(c({},le.Struct.object.exclude(e,["name"])),{className:r})}var st={getProps:ct},ne=st;var q=b(p("rcfm"));function mt(e={}){let t=n(e,"title",{default:""}),r=n(e,"labels",{default:[],validate(u){q.Type.mustbe.array(u)}}),i=n(e,"activeIndex",{default:0,validate(u){q.Type.mustbe.integer(u)}}),l=n(e,"onSwitch",{default:null,validate(u){q.Type.mustbe.function(u)}});i>r.length-1&&(i=r.length-1),i<0&&(i=0);let o=s(e.className,"rcfm-tabs"),a={header:"rcfm-tabs-header",title:"rcfm-tabs-title",label:"rcfm-tabs-label",pane:"rcfm-tabs-pane"};return{wrapperProps:d(c({},q.Struct.object.exclude(e,["className","labels","activeIndex","onSwitch"])),{className:o}),title:t,labels:r,activeIndex:i,onSwitch:l,classNames:a}}function ft(e,t,r){return`${e} ${t===r?e+"-active":""}`}var dt={getProps:mt,activateClass:ft},oe=dt;var x=b(p("rcfm"));function C(e={},t={}){let[r]=[t.rootClass||""],[i,l]=[t.builtinOnly||[],t.builtinExcept||[]],o=(()=>x.Type.is.array(t.acceptCustom)?D=>t.acceptCustom.includes(D):()=>!!t.acceptCustom)(),a=n(e,"type",{default:""}),u=n(e,"value",{default:void 0}),m=n(e,"name",{default:""}),f=n(e,"placeholder",{default:""}),v="invalid"in e&&e.invalid!==!1,g="disabled"in e&&e.disabled!==!1,E="readonly"in e&&e.readonly!==!1,A="multiple"in e&&e.multiple!==!1,Y="multiline"in e&&e.multiline!==!1,$="includeblank"in e&&e.includeblank!==!1,R=n(e,"size",{default:""}),ze=n(e,"debounce",{default:null}),De=n(e,"options",{default:[],validate(k){x.Type.mustbe.array(k),k.forEach(D=>{x.Type.mustbe.object(D,"Option"),x.Type.mustbe.string(D.label,"Option label")})}}),Le=(()=>E||g?null:n(e,"onChange",{default:null}))(),_e=s([o("className")?e.className:"","rcfm-fmtag",r,R?`rcfm-fm-${R}`:"",v?"rcfm-fm-invalid":""]),F={name:m,type:a,value:u,placeholder:f,invalid:v,disabled:g,readonly:E,multiple:A,multiline:Y,includeblank:$,size:R,debounce:ze,options:De,onChange:Le,className:_e},z=x.Struct.object.exclude(e,Object.keys(F));i.length&&(F=x.Struct.object.collect(F,i)),l.length&&(F=x.Struct.object.exclude(F,l));let Be=Object.keys(z).filter(k=>o(k));return z=x.Struct.object.collect(z,Be),c(c({},z),F)}var pt=(()=>{function e(t={}){let{multiline:r}=C(t,{builtinOnly:["multiline"]}),i=C(t,{acceptCustom:["className"],builtinOnly:["className"],rootClass:r?"rcfm-fmtextarea":"rcfm-fminput"}),l=C(t,{acceptCustom:!0,builtinOnly:["type","name","placeholder","disabled","readonly","debounce","onChange"]});return l.className="rcfm-fmtag",l.value=n(t,"value",{default:""}),!r&&(l.type=n(t,"type",{default:""})),{multiline:r,inputProps:l,wrapperProps:i}}return{getProps:e}})(),bt=(()=>{function e(t={}){let r=C(t,{acceptCustom:["className"],builtinOnly:["className"],rootClass:"rcfm-fminput"}),i=C(t,{acceptCustom:!0,builtinOnly:["type","name","placeholder","disabled","readonly","debounce","onChange"]});return i.type="number",i.className="rcfm-fmtag",i.value=n(t,"value",{default:NaN,validate(l){x.Type.mustbe.number(l)}}),isNaN(i.value)&&(i.value=""),{inputProps:i,wrapperProps:r}}return{getProps:e}})(),ae=(()=>{function e(t={}){let r=n(t,"value",{default:void 0}),{options:i}=C(t,{builtinOnly:["options"]}),l=C(t,{acceptCustom:!0,builtinOnly:["className"],rootClass:"rcfm-fmradio"}),o=C(t,{acceptCustom:!1,builtinOnly:["name","disabled","readonly","onChange"]});return o.type="radio",o.className="rcfm-fmtag",{inputProps:o,wrapperProps:l,value:r,options:i}}return{getProps:e}})(),gt=(()=>{function e(r={}){let i=n(r,"value",{default:[],validate(u){x.Type.mustbe.array(u)}}),l=C(r,{acceptCustom:!0,builtinOnly:["className"],rootClass:"rcfm-fmcheck"}),{inputProps:o,options:a}=ae.getProps(r);return o.type="checkbox",{wrapperProps:l,inputProps:o,value:i,options:a}}function t(r,i=[],l){let o=i.slice(),a=o.includes(l);return r.target.checked?!a&&o.push(l):a&&(o=o.filter(u=>u!==l)),o}return{getProps:e,getNewValue:t}})(),ue=(()=>{function e(r={}){let{includeblank:i,options:l}=C(r),o=n(r,"value",{default:void 0}),a=C(r,{acceptCustom:["className"],builtinOnly:["className"],rootClass:"rcfm-fmselect"}),u=C(r,{acceptCustom:!0,builtinOnly:["name","placeholder","disabled","readonly","onChange"]});return u.className="rcfm-fmtag",{inputProps:u,wrapperProps:a,includeblank:i,options:l,value:o}}function t(r,i=[]){var l;return((l=i.find(o=>o.value===r))==null?void 0:l.label)||""}return{getProps:e,findLabel:t}})(),ht=(()=>{function e(t={}){let r=n(t,"value",{default:[],validate(a){x.Type.mustbe.array(a)}}),{wrapperProps:i,inputProps:l,options:o}=ue.getProps(t);return l.multiple=!0,{inputProps:l,wrapperProps:i,options:o,value:r}}return{getProps:e}})(),vt=(()=>{function e(o={}){let a=n(o,"size",{default:""}),u=s(o.className,["rcfm-fmtag","rcfm-fmfield",a?`rcfm-fmfield-${a}`:""]);return d(c({},x.Struct.object.exclude(o,["className","size","label","hint","error"])),{className:u})}function t(o={}){let a=n(o,"label",{default:""});if(!a)return{};let u=n(o,"size",{default:""}),m="required"in o&&o.required!==!1;return{className:s(["rcfm-fmtag","rcfm-fmlabel",u?`rcfm-fmlabel-${u}`:"",m?"rcfm-fmlabel-required":""]),label:a}}function r(o={}){let a=n(o,"hint",{default:""});if(!a)return{};let u=n(o,"size",{default:""});return{className:s(["rcfm-fmtag","rcfm-fmhint",u?`rcfm-fmhint-${u}`:""]),hint:a}}function i(o={}){let a=(()=>(x.Type.is.array(o.errors)?o.errors:[o.errors]).concat(o.error).flat(1/0).filter(f=>f).map(f=>f.message||f.name||f))();if(!a.length)return{};let u=n(o,"size",{default:""});return{className:s(["rcfm-fmtag","rcfm-fmerror",u?`rcfm-fmerror-${u}`:""]),error:a}}function l(o={}){return{wrapperProps:e(o),labelProps:t(o),hintProps:r(o),errorProps:i(o)}}return{getProps:l}})(),yt={Field:vt,TextInput:pt,NumberInput:bt,Radios:ae,Checkboxes:gt,SingleSelect:ue,MultipleSelect:ht},ce=yt;var se=b(p("rcfm"));function xt(e={}){let t=n(e,"type",{default:"info"}),r=n(e,"hint",{default:""}),i=!("on"in e)||e.on!==!1,l=s(e.className,[`rcfm-highlight-${t}`,i?"":"rcfm-highlight-off"]);return{on:i,hintProps:{type:t,hint:r,className:"rcfm-highlight-hint"},wrapperProps:d(c({},se.Struct.object.exclude(e,["type","hint","on","className"])),{className:l})}}var Ct={getProps:xt},me=Ct;var Z=b(p("rcfm"));var Nt={editor:{boolean:{option:{true:"Yes",false:"No"}}}},fe=Nt;var Pt={editor:{boolean:{option:{true:"\u662F",false:"\u5426"}}}},de=Pt;Z.I18n.global.define({en:{section:{dataType:fe}},zh:{section:{dataType:de}}});var G=Z.I18n.global;var wt={getProps(e={}){let t=n(e,"value",{default:void 0}),r=n(e,"onChange"),i=[{value:!0,label:G.t("section.dataType.editor.boolean.option.true")},{value:!1,label:G.t("section.dataType.editor.boolean.option.false")}];return d(c({},e),{value:t,options:i,onChange:r})}},pe=wt;var It={getProps(e={}){let t=n(e,"value"),r=n(e,"onChange");return d(c({},e),{value:t,onChange:r})}},be=It;function Tt(e){if([null,void 0,NaN].includes(e))return"";if(typeof e=="string")return e;try{return JSON.stringify(e)}catch(t){return String(e)}}function jt(e){if(typeof e!="string")return e;if(e.match(/^\s*$/))return null;if(e!=="undefined"){if(e==="NaN")return NaN;if(e.match(/-\s*NaN/))return NaN;if(e==="Infinity")return 1/0;if(e.match(/-\s*Infinity/))return-1/0;try{return JSON.parse(e)}catch(t){return e}}}var Ot={getProps(e={}){let t=Tt(e.value),r=l=>e.onChange&&e.onChange(jt(l)),i=s("rcfm-object-type-editor",e.className);return d(c({},e),{className:i,value:t,onChange:r,multiline:!0})}},ge=Ot;var Et={getProps(e={}){let t=n(e,"value",{default:""}),r=n(e,"onChange");return d(c({},e),{value:t,onChange:r})}},he=Et;var St={Boolean:pe,Number:be,Object:ge,String:he},ve=St;var Ft={Editor:ve},ye=Ft;var Ht={required(e,t){let r=e.schema.for({id:t.id,prop:"value"}),i=e.get({id:t.id,prop:"validation"});return!!(r.validation||[]).concat(i||[]).find(a=>"presence"in a)},readonly(e,t){let r=t.id;return!!(!e.get({id:r,prop:"editable"})||!e.get({id:r,prop:"visible"})||e.get({id:r,prop:"calculation"},{include:"raw"}).raw.value)}},xe=Ht;var Pe=b(p("rcfm"));var J=b(p("rcfm"));var qt={member:{propEditor:{tabs:{labels:{always:"Always",conditional:"Conditional"}},options:{each:{labelLabel:"Label",valueLabel:"Value"}},condition:{elseBranch:{resultTitle:"Else"},whenBranch:{title:"When",resultTitle:"Then",delete:"Delete Branch",add:"New Branch",logics:{and:"And",or:"Or"}}}}},group:{field:{title:"Simple Fields"}},field:{textField:{title:"Text Field"},multilineTextField:{title:"Multiline Text"},numberField:{title:"Number Field"},radioField:{title:"Radio Field"},checkboxField:{title:"Checkbox Field"},singleSelectField:{title:"Single Select"},multipleSelectField:{title:"Multiple Select"}}},Ce=qt;var $t={member:{propEditor:{tabs:{labels:{always:"\u603B\u662F",conditional:"\u6309\u6761\u4EF6"}},options:{each:{labelLabel:"\u9009\u9879\u6587\u5B57",valueLabel:"\u9009\u9879\u503C"}},condition:{elseBranch:{resultTitle:"\u5426\u5219"},whenBranch:{title:"\u5F53",resultTitle:"\u5219",delete:"\u5220\u9664\u5206\u652F",add:"\u65B0\u589E\u5206\u652F",logics:{and:"\u4E14",or:"\u6216"}}}}},group:{field:{title:"\u7B80\u5355\u8F93\u5165\u9879"}},field:{textField:{title:"\u5355\u884C\u6587\u672C"},multilineTextField:{title:"\u591A\u884C\u6587\u672C"},numberField:{title:"\u6570\u5B57\u8F93\u5165"},radioField:{title:"\u5355\u9879\u9009\u62E9"},checkboxField:{title:"\u591A\u9879\u9009\u62E9"},singleSelectField:{title:"\u4E0B\u62C9\u5355\u9009"},multipleSelectField:{title:"\u4E0B\u62C9\u591A\u9009"}}},Ne=$t;J.I18n.global.define({en:{section:{form:Ce}},zh:{section:{form:Ne}}});var P=J.I18n.global;var we={FIELD_ICONS:{},getChildGroups(){return[{name:"field",title:P.t("section.form.group.field.title"),types:(Pe.Form.group("field")||[]).map(e=>{let t=e.type[0].toLowerCase()+e.type.slice(1);return{type:e.type,icon:we.FIELD_ICONS[e.type]||"plus",title:P.t(`section.form.field.${t}.title`)}})}]}},Ie=we;var $e=b(p("rcfm"));var Se=b(p("rcfm"));var S=b(p("rcfm"));function kt(e={},t={},r){let i=c({},t.else),l=t.whens.slice(),{target:o,action:a,branchIndex:u,result:m}=e;return o==="else"?"result"in e&&(i.result=m):o==="when"&&(a==="delete"?l.splice(u,1):a==="append"?l.splice(u+1,0,{rules:[{logic:"",expression:{}}],result:W(r)}):a==="update"&&"result"in e&&(l[u].result=m)),{whens:l,else:i}}function At(e={},t={}){let r=c({},t.else),i=t.whens.slice(),{action:l,branchIndex:o,ruleIndex:a,logic:u,name:m,rule:f,value:v}=e,g=i.slice()[o].rules;return l==="delete"?(g.splice(a,1),a===0&&g.length&&(g[0].logic="")):l==="append"?(u=a===-1?"":"and",g.splice(a+1,0,{logic:u,expression:{}})):l==="update"&&("logic"in e&&(g[a].logic=u),"rule"in e&&(g[a].expression.rule=f),"name"in e&&(g[a].expression.name=m,g[a].expression.rule=void 0),"value"in e&&(g[a].expression.value=v,g[a].expression.name=void 0,g[a].expression.rule=void 0)),{whens:i,else:r}}function W(e){return S.Type.is.function(e)?e():e}function zt(e,t,r){let l=e.schema.constructor.Condition.extract(t);return S.Type.is.blank(l.else.result)&&(l.else={result:W(r)}),(S.Type.isnt.array(l.whens)||!l.whens.length)&&(l.whens=[{rules:[{logic:"",expression:{}}],result:W(r)}]),l.whens=l.whens.map(({rules:o,result:a})=>(o=o.length?o.map(({logic:u,expression:m})=>({logic:u,expression:e.validator.extractValidation(m)})):[{logic:"",expression:{}}],{rules:o,result:a})),l}function Dt(e,t={}){return e.schema.constructor.Condition.combine({else:t.else,whens:t.whens.map(({rules:i,result:l})=>(i=i.map(({logic:o,expression:a})=>({logic:o,expression:e.validator.combineValidation(a)})),{rules:i,result:l}))})}var O={getProps(e={}){let t=n(e,"reactive",{required:!0}),r=n(e,"member",{required:!0}),i=n(e,"onChange",{required:!0}),l=n(e,"ResultComponent",{required:!0});S.Type.mustbe.function(l);let o=n(e,"defaultResult",{default:void 0}),a=n(e,"value",{default:[]}),u=zt(t,a,o),m=n(e,"exception");return{reactive:t,member:r,exception:m,branches:u,ResultComponent:l,onChange(f={}){u=(f.target==="rule"?At:kt)(f,u,o),a=Dt(t,u),i(a)}}},getLogics(){let[e,t]=["section.form.member.propEditor.condition.whenBranch.logics.and","section.form.member.propEditor.condition.whenBranch.logics.or"];return[{value:"and",label:P.t(e)},{value:"or",label:P.t(t)}]},joinProvider(e={}){return!e||!e.id||!e.prop?"":`${e.id}/${e.prop}`},splitProvider(e=""){let[t,r]=e.split("/");return{id:t||"",prop:r||""}},getProviders(e={}){let t=n(e,"reactive",{required:!0}),r=n(e,"member",{required:!0});return(S.Form.providers(t,r)||[]).map(i=>({value:O.joinProvider(i),label:t.get({id:i.id,prop:"label"})}))},isConditionException(e={},t=""){var r;return!e||e.type!=="CONDITION_INVALID_CONDITION"?!1:t?((r=e==null?void 0:e.data)==null?void 0:r.dueto)===t:!0},isntConditionException(e={},t=""){return!O.isConditionException(e,t)},isWhensException(e={}){return O.isConditionException(e,"whens")},isRulesException(e={}){return O.isConditionException(e,"rules")},isLogicException(e={}){return O.isConditionException(e,"logic")},isProviderException(e={}){return O.isConditionException(e,"provider")},isValidationException(e={}){return O.isConditionException(e,"validation")}},Te=O;var je=b(p("rcfm"));function Lt(e,t,r=[],i={}){r=r.slice();let{index:l,action:o,label:a,value:u}=i;return o==="delete"?r.splice(l,1):o==="append"?r.splice(l+1,0,{label:"",value:""}):o==="update"&&("label"in i&&(r[l].label=a),"value"in i&&(r[l].value=u)),r}var _t={getProps(e={}){let t=n(e,"reactive",{required:!0}),r=n(e,"member",{required:!0}),i=n(e,"onChange",{required:!0}),l=n(e,"exception",{default:null}),o=n(e,"value",{default:[],validate(a){je.Type.mustbe.array(a)}});return o.length||(o=[{}]),{reactive:t,member:r,value:o,exception:l,onChange(a){i(o=Lt(t,r,o,a))}}}},Oe=_t;var I=b(p("rcfm"));function Bt(e,t=[],r={}){t=t.slice();let{index:i,action:l,name:o,rule:a}=r;return l==="delete"?t.splice(i,1):l==="append"?t.splice(i+1,0,{}):l==="update"&&("rule"in r&&(t[i].rule=a),"name"in r&&(t[i].name=o,t[i].rule=void 0)),t.map(u=>(u=e.validator.combineValidation(u),I.Struct.object.exclude(u,["valOf"])))}var Rt={getProps(e={}){let t=n(e,"reactive",{required:!0}),r=n(e,"member",{required:!0}),i=n(e,"onChange",{required:!0}),l=n(e,"exception",{default:null}),o=n(e,"value",{default:[],validate(u){I.Type.mustbe.array(u)}});o.length||(o=[{}]),o=o.map(u=>t.validator.extractValidation(u));let a=n(e,"actions",{default:["append","update","delete"],validate(u){I.Type.mustbe.array(u)}});return{reactive:t,member:r,value:o,exception:l,actions:a,onChange(u){i(o=Bt(t,o,u))}}},getValidators(e={}){let t=n(e,"reactive",{required:!0}),r=n(e,"member",{required:!0});return(I.Form.validators(t,r)||[]).map(i=>({label:P.t(`validator.validators.${i.name}.label`),value:i.name}))},getRuleType(e={}){var f;let t=n(e,"reactive",{required:!0}),r=n(e,"member",{required:!0});r={id:r.id,prop:"value"};let i=n(e,"value",{required:!0,validate(v){I.Type.mustbe.object(v)}}),{name:l,rule:o}=i,{ruleType:a}=t.validator.get(l)||{};if(!a)return;if(I.Type.is.string(a)&&a!=="*")return a;let m=(f=(t.schema.for(r).validation||[]).find(v=>"dataType"in v))==null?void 0:f.dataType;return I.Type.is.string(m)&&m!=="*"?m:"Object"}},Ee=Rt;var Fe={Condition:Te,Options:Oe,Validation:Ee,getProps(e={}){let t=n(e,"reactive",{required:!0}),r=n(e,"member",{required:!0,validate(i){Se.Type.mustbe.nonblankString(i.prop)}});return{reactive:t,member:r}},getTabsProps(e={}){let{reactive:t,member:r}=Fe.getProps(e),{id:i,prop:l}=r,o=t.schema.constructor.Condition,a=t.get(r,{include:"raw"}).raw.value,{schemable:u,label:m}=t.schema.for(r),f=o.isCondition(a);u||(f=!1);let v=f?1:0,g=u?[P.t("section.form.member.propEditor.tabs.labels.always"),P.t("section.form.member.propEditor.tabs.labels.conditional")]:[],E=()=>t.schema.for(r).default,A=$=>e.onAction({action:"update",reactive:t,id:i,prop:l,value:$});return{title:m,labels:g,activeIndex:v,onChange:A,onSwitch:$=>A(!u||!$?E():[{when:[{}],then:E()},{else:E()}]),defaultResult:E}},getPropType(e,t){var i;let{validation:r}=e.schema.for(t);return r&&((i=r.find(l=>"dataType"in l))==null?void 0:i.dataType)||"Object"}},He=Fe;var K=b(p("rcfm"));var Vt={Actions:{getProps(e={}){let t=n(e,"action",{default:["delete","increase","decrease","edit"],validate(i){K.Type.mustbe.array(i)}}),r=n(e,"onAction",{required:t&&t.length,valudate(i){K.Type.mustbe.function(i)}});return{actions:t,onAction:r}}}},qe=Vt;var Ut={PropEditor:He,Previewer:qe,getProps(e){let t=n(e,"reactive",{required:!0}),r=n(e,"member",{required:!0}),i=n(e,"onAction",{default:null,validate(l){$e.Type.mustbe.function(l)}});return{reactive:t,member:r,onAction:i}},joinErrors(e={}){return!e||(e=Object.values(e).flat(1/0),!e.length)?"":e.map(t=>t.message).join(" ")}},ke=Ut;var Mt={Field:xe,Member:ke,Fieldset:Ie},Ae=Mt;function Zt(){let e=h.create();return e.Debouncer=w,e.getProp=n,e.joinClass=s,e.Component={Alert:re,Button:ie,Icon:ne,Tabs:oe,Form:ce,Highlight:me},e.Section={DataType:ye,Form:Ae},e}var Gt=Zt();typeof window!="undefined"&&window.ReactiveForm&&(window.ReactiveForm.UI=Gt);})();
//# sourceMappingURL=rcfm.helper.iife.min.js-80e5635d.map
