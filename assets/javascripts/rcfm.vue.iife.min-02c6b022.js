/*!
 * rcfm 2.0.0-beta.0 | rcfm/vue iife | https://reactive-form.github.io/
 * Copyright 2021 - 2022 JLxiangyun | MIT license
 */
(()=>{var nn=Object.create;var Ge=Object.defineProperty,an=Object.defineProperties,ln=Object.getOwnPropertyDescriptor,mn=Object.getOwnPropertyDescriptors,cn=Object.getOwnPropertyNames,zr=Object.getOwnPropertySymbols,un=Object.getPrototypeOf,qr=Object.prototype.hasOwnProperty,pn=Object.prototype.propertyIsEnumerable;var Jr=(e,t,r)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))qr.call(t,r)&&Jr(e,r,t[r]);if(zr)for(var r of zr(t))pn.call(t,r)&&Jr(e,r,t[r]);return e},s=(e,t)=>an(e,mn(t)),dn=e=>Ge(e,"__esModule",{value:!0});var a=e=>{if(typeof require!="undefined")return require(e);throw new Error('Dynamic require of "'+e+'" is not supported')};var sn=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of cn(t))!qr.call(e,o)&&o!=="default"&&Ge(e,o,{get:()=>t[o],enumerable:!(r=ln(t,o))||r.enumerable});return e},l=e=>sn(dn(Ge(e!=null?nn(un(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);(()=>{let e=window.require;window.require=t=>e&&e(t)||{vue:window.Vue,"rcfm/vue":{UI:window.ReactiveForm.UI}}[t]})();var C=l(a("rcfm/helper"));var Kr=l(a("vue"));function Le(e,t){let r=null;(0,Kr.watch)(e,o=>{o?(r=n=>{!o||o.contains(n.target)||t(n)},document.addEventListener("click",r)):(document.removeEventListener("click",r),r=null)},{immediate:!0})}var Qr=l(a("rcfm")),Y=l(a("vue"));function ze(e=""){let t=(0,Y.ref)("");return(0,Y.computed)(()=>{let r=(0,Y.unref)(e);return r||(t.value?t.value:t.value=(0,Qr.guid)())})}var qe=l(a("vue"));function fn(e,t={}){t||(t={});let{id:r,prop:o}=t,n=(0,qe.shallowRef)(Xr(e,t));return r&&(0,qe.onUnmounted)(e.subscribe({id:r},()=>{e.family.hasnt({id:r})||(n.value=Xr(e,o?{id:r,prop:o}:{id:r}))})),n}function Xr(e,t){return e.get(t,{include:["raw","error"]})}var Jt=fn;var Yr=l(a("vue")),Kt=l(a("rcfm/helper"));function Je(e={}){let{name:t,customProps:r}=Kt.UI.getProps(e,{name:{dataType:"String",required:!0}}),o=Kt.UI.joinClass({root:"rcfm-component-ico",klass:t},e.className);return(0,Yr.createVNode)("i",s(d({},r),{className:o}),null)}var M=l(a("vue")),Zr=l(a("rcfm")),Qt=l(a("rcfm/helper"));function Ke(e,{slots:t}){let r=Qt.UI.Component.Button,{customProps:o,type:n,disabled:i,onClick:c,icon:m,topIcon:u,leftIcon:p,rightIcon:f}=r.getProps(e),h=r.joinWrapperClass(e),v=(()=>m?to:u||p||f?bn:eo)();return(0,M.createVNode)("button",s(d({},o),{type:n,disabled:i,onClick:c,className:h}),[(0,M.createVNode)(v,{icon:m||u||p||f},{default:()=>{var b;return[(b=t.default)==null?void 0:b.call(t)]}})])}function eo(e,{slots:t}){var r;return(0,M.createVNode)(M.Fragment,null,[(r=t.default)==null?void 0:r.call(t)])}function to(e,{slots:t}){var o;let r=Qt.UI.use("Vue.Component.Icon");return Zr.Type.is.boolean(e.icon)?(0,M.createVNode)(M.Fragment,null,[(o=t.default)==null?void 0:o.call(t)]):(0,M.createVNode)(r,{name:e.icon},null)}function bn(e,{slots:t}){return(0,M.createVNode)(M.Fragment,null,[(0,M.createVNode)(to,{icon:e.icon},null),(0,M.createVNode)(eo,null,{default:()=>{var r;return[(r=t.default)==null?void 0:r.call(t)]}})])}var ro=l(a("vue")),oo=l(a("rcfm/helper"));function Qe(e,{slots:t}){var i;let r=oo.UI.Component.Button.Group,{customProps:o}=r.getProps(e),n=r.joinWrapperClass(e);return(0,ro.createVNode)("div",s(d({},o),{className:n}),[(i=t.default)==null?void 0:i.call(t)])}var no=l(a("vue")),Xt=l(a("rcfm/helper"));function Xe(e,{slots:t}){var i;let{type:r,customProps:o}=Xt.UI.getProps(e,{type:{dataType:"String",default:"info"}}),n=Xt.UI.joinClass({root:"rcfm-component-alert",klass:r},e.className);return(0,no.createVNode)("div",s(d({},o),{className:n}),[(i=t.default)==null?void 0:i.call(t)])}var io=l(a("vue"));function Ye(e,{slots:t}){var r;return(0,io.createVNode)("h6",{className:"rcfm-component-alert-title"},[(r=t.default)==null?void 0:r.call(t)])}var ao=l(a("vue"));function Ze(e,{slots:t}){var r;return(0,ao.createVNode)("p",{className:"rcfm-component-alert-text"},[(r=t.default)==null?void 0:r.call(t)])}var Z=l(a("vue")),ve=l(a("rcfm/helper"));function lo(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!(0,Z.isVNode)(e)}function et(e,{slots:t}){var v,b;let r,o=ve.UI.Component.Highlight,n=ve.UI.use("Vue.Component.Alert"),i=ve.UI.use("Vue.Component.AlertText"),{customProps:c,type:m,hint:u,hintPosition:p,on:f}=o.getProps(e),h=o.joinWrapperClass(e);return(0,Z.createVNode)("div",s(d({},c),{className:h}),[p==="bottom"?(v=t.default)==null?void 0:v.call(t):null,!f||!u.length?null:(0,Z.createVNode)(n,{className:ve.UI.joinClass({root:"rcfm-component-highlight-hint",klass:p}),type:m},lo(r=u.map((g,V)=>(0,Z.createVNode)(i,{key:V},lo(g)?g:{default:()=>[g]})))?r:{default:()=>[r]}),p==="top"?(b=t.default)==null?void 0:b.call(t):null])}var O=l(a("vue")),ee=l(a("rcfm/helper"));function tt(e,{slots:t,emit:r}){var p;let o=ee.UI.Component.Tabs,{title:n,labels:i,activeIndex:c,customProps:m}=o.getProps(e),u=ee.UI.joinClass("rcfm-component-tabs",e.className);return(0,O.createVNode)("div",s(d({},m),{className:u}),[(0,O.createVNode)("div",{className:"rcfm-component-tabs-header"},[n&&(0,O.createVNode)("h6",{className:"rcfm-component-tabs-title"},[n]),i.map((f,h)=>(0,O.createVNode)("label",{key:f,tabIndex:0,onClick:()=>r("switch",h),onKeydown:v=>v.keyCode===13&&r("switch",h),className:ee.UI.joinClass({root:"rcfm-component-tabs",klass:["label",c===h?"label-active":""]})},[f]))]),i.length?i.map((f,h)=>{var v,b;return(0,O.createVNode)("div",{key:f,className:ee.UI.joinClass({root:"rcfm-component-tabs",klass:["pane",c===h?"pane-active":""]})},[(b=(v=t.default)==null?void 0:v.call(t))==null?void 0:b[h]])}):(0,O.createVNode)("div",{className:ee.UI.joinClass({root:"rcfm-component-tabs",klass:["pane","pane-active"]})},[(p=t.default)==null?void 0:p.call(t)])])}function rt(e,{slots:t}){return t==null?void 0:t.default()}var he=l(a("vue")),mo=l(a("rcfm/helper"));function ot(e,{slots:t}){var m;let r=mo.UI.Component.Form.Field,{customProps:o,label:n,hint:i,error:c}=r.getProps(e);return(0,he.createVNode)("div",s(d({},o),{className:r.joinWrapperClass(e)}),[n&&(0,he.createVNode)("label",{className:r.joinLabelClass(e)},[n]),(m=t.default)==null?void 0:m.call(t),c.length?(0,he.createVNode)("p",{className:r.joinErrorClass(e)},[c.map(u=>u+" ")]):null,!c.length&&i&&(0,he.createVNode)("p",{className:r.joinHintClass(e)},[i])])}var nt=l(a("vue")),it=l(a("rcfm/helper")),at=l(a("vue"));function vn(e){let t=it.UI.Component.Form.NumberInput,{id:r,name:o,value:n,placeholder:i,disabled:c,readonly:m,onChange:u,customProps:p}=t.getProps(e),f=isNaN(n)?"":n,h=b=>{u&&u(b.target.value.length?Number(b.target.value):NaN),b.target.value=f},v=it.UI.joinClass("rcfm-component-fminput",t.joinModifierClass(e),e.className);return(0,nt.createVNode)("div",{id:r,className:v},[(0,nt.createVNode)("input",s(d({},p),{className:"rcfm-fmtag",type:"number",name:o,placeholder:i,value:f,disabled:m||c,readonly:m||c,onInput:h,onChange:(0,at.withModifiers)(()=>{},["stop"])}),null)])}var Yt={props:["name"],setup(e){let r=it.UI.Vue.composables.useNonblankName((0,at.toRef)(e,"name"));return()=>(0,nt.createVNode)(vn,s(d({},e),{name:r.value}),null)}};var Ce=l(a("vue")),lt=l(a("rcfm/helper")),ge=l(a("vue"));function hn(e){let t=lt.UI.Component.Form.TextInput,{id:r,name:o,multiline:n,type:i,value:c,placeholder:m,disabled:u,readonly:p,onChange:f,customProps:h}=t.getProps(e),v=g=>{f?f(g.target.value):g.target.value=c},b=lt.UI.joinClass({root:"rcfm-component",klass:n?"fmtextarea":"fminput"},t.joinModifierClass(e),e.className);return(0,Ce.createVNode)("div",{id:r,className:b},[n?(0,Ce.createVNode)("textarea",s(d({},h),{className:"rcfm-fmtag",name:o,value:c,placeholder:m,disabled:p||u,readonly:p||u,onInput:v,onChange:(0,ge.withModifiers)(()=>{},["stop"])}),null):(0,Ce.createVNode)("input",s(d({},h),{className:"rcfm-fmtag",type:i,name:o,value:c,placeholder:m,disabled:p||u,readonly:p||u,onInput:v,onChange:(0,ge.withModifiers)(()=>{},["stop"])}),null)])}var Zt={props:["name"],setup(e){let r=lt.UI.Vue.composables.useNonblankName((0,ge.toRef)(e,"name"));return()=>(0,Ce.createVNode)(hn,s(d({},e),{name:r.value}),null)}};var D=l(a("vue")),mt=l(a("rcfm/helper")),$=l(a("vue"));function Cn(e){let t=mt.UI.Component.Form.SingleSelect,{id:r,name:o,value:n,placeholder:i,includeblank:c,options:m,disabled:u,readonly:p,onChange:f,customProps:h}=t.getProps(e),v=t.findLabel({options:m,value:n}),[b,g]=[(0,$.ref)(null),(0,$.ref)(null)],V=()=>{let N=b.value.selectedIndex-1;f&&f(N<0?null:m[N].value);let x=m.findIndex(W=>W.value===n);b.value.selectedIndex=x<0?-1:x+1,g.value.value=t.findLabel({options:m,value:n})},y=mt.UI.joinClass("rcfm-component-fmselect",t.joinModifierClass(e),e.className);return(0,D.createVNode)("div",{id:r,className:y},[(0,D.createVNode)("select",s(d({},h),{className:"rcfm-fmtag",name:o,value:n,ref:b,disabled:u||p,readonly:u||p,onChange:(0,$.withModifiers)(V,["stop"])}),[(0,D.createVNode)("option",{className:"rcfm-fmtag",style:{display:c?"initial":"none"}},null),m.map(N=>(0,D.createVNode)("option",{className:"rcfm-fmtag",key:N.value,value:N.value},[N.label]))]),(0,D.createVNode)("input",{className:"rcfm-fmtag",tabIndex:-1,placeholder:i,value:v,ref:g,disabled:u||p,readonly:u||p},null)])}var er={props:["name"],setup(e){let r=mt.UI.Vue.composables.useNonblankName((0,$.toRef)(e,"name"));return()=>(0,D.createVNode)(Cn,s(d({},e),{name:r.value}),null)}};var Ve=l(a("vue")),ct=l(a("rcfm/helper")),te=l(a("vue"));function gn(e){let t=ct.UI.Component.Form.MultipleSelect,{id:r,name:o,value:n,options:i,disabled:c,readonly:m,onChange:u,customProps:p}=t.getProps(e),f=(0,te.ref)(null),h=()=>{let b=Array.from(f.value.options);u&&u(i.filter((g,V)=>b[V].selected).map(g=>g.value)),b.some((g,V)=>g.selected=n.includes(i[V].value))},v=ct.UI.joinClass("rcfm-component-fmselect",t.joinModifierClass(e),e.className);return(0,Ve.createVNode)("div",{id:r,className:v},[(0,Ve.createVNode)("select",s(d({},p),{className:"rcfm-fmtag",multiple:!0,name:o,ref:f,disabled:c||m,readonly:c||m,onChange:(0,te.withModifiers)(h,["stop"])}),[i.map(b=>(0,Ve.createVNode)("option",{className:"rcfm-fmtag",key:b.value,value:b.value,selected:n.includes(b.value)},[b.label]))])])}var tr={props:["name"],setup(e){let r=ct.UI.Vue.composables.useNonblankName((0,te.toRef)(e,"name"));return()=>(0,Ve.createVNode)(gn,s(d({},e),{name:r.value}),null)}};var Ne=l(a("vue")),ut=l(a("rcfm/helper")),re=l(a("vue"));function Vn(e){let t=ut.UI.Component.Form.Checkboxes,{id:r,name:o,value:n,options:i,disabled:c,readonly:m,onChange:u,customProps:p}=t.getProps(e),f=i.map(()=>(0,re.ref)(null)),h=b=>()=>{u&&u(t.mutateValue({value:n,[f[b].value.checked?"insert":"remove"]:i[b].value})),f.some((g,V)=>g.value.checked=n.includes(i[V].value))},v=ut.UI.joinClass("rcfm-component-fmcheck",t.joinModifierClass(e),e.className);return(0,Ne.createVNode)("div",{id:r,className:v},[i.map((b,g)=>(0,Ne.createVNode)("label",{className:"rcfm-fmtag",key:b.value},[(0,Ne.createVNode)("input",s(d({},p),{className:"rcfm-fmtag",type:"checkbox",name:o,ref:f[g],value:b.value,checked:n.includes(b.value),disabled:c||m,readonly:c||m,onChange:(0,re.withModifiers)(h(g),["stop"])}),null),b.label]))])}var rr={props:["name"],setup(e){let r=ut.UI.Vue.composables.useNonblankName((0,re.toRef)(e,"name"));return()=>(0,Ne.createVNode)(Vn,s(d({},e),{name:r.value}),null)}};var Se=l(a("vue")),pt=l(a("rcfm/helper")),oe=l(a("vue"));function Nn(e){let t=pt.UI.Component.Form.Radios,{id:r,name:o,value:n,options:i,disabled:c,readonly:m,onChange:u,customProps:p}=t.getProps(e),f=i.map(()=>(0,oe.ref)(null)),h=b=>()=>{u&&u(i[b].value),f.some((g,V)=>g.value.checked=i[V].value===n)},v=pt.UI.joinClass("rcfm-component-fmradio",t.joinModifierClass(e),e.className);return(0,Se.createVNode)("div",{id:r,className:v},[i.map((b,g)=>(0,Se.createVNode)("label",{className:"rcfm-fmtag",key:b.value},[(0,Se.createVNode)("input",s(d({},p),{className:"rcfm-fmtag",type:"radio",name:o,ref:f[g],value:b.value,checked:n===b.value,disabled:c||m,readonly:c||m,onChange:(0,oe.withModifiers)(h(g),["stop"])}),null),b.label]))])}var or={props:["name"],setup(e){let r=pt.UI.Vue.composables.useNonblankName((0,oe.toRef)(e,"name"));return()=>(0,Se.createVNode)(Nn,s(d({},e),{name:r.value}),null)}};var co=l(a("vue"));var xe=l(a("vue")),dt=l(a("rcfm/helper"));function ne(e){let t=dt.UI.Component.Form.Object,r=dt.UI.use("Vue.Component.Form.TextInput");return(0,xe.createVNode)(xe.Fragment,null,[(0,xe.createVNode)(r,s(d({},e),{className:dt.UI.joinClass("rcfm-component-fmobject",e.className),value:t.decorateValue(e.value),onChange:t.decorateOnChange(e.onChange)}),null)])}function st(e){return(0,co.createVNode)(ne,e,null)}var uo=l(a("vue")),nr=l(a("rcfm/helper"));function ft(e){let t=nr.UI.Component.Form.Boolean,r=nr.UI.use("Vue.Component.Form.Radios");return(0,uo.createVNode)(r,s(d({},e),{options:t.getOptions()}),null)}var po=l(a("vue")),so=l(a("rcfm/helper"));function bt(e){let t=so.UI.use("Vue.Component.Form.NumberInput");return(0,po.createVNode)(t,e,null)}var fo=l(a("vue")),bo=l(a("rcfm/helper"));function vt(e){let t=bo.UI.use("Vue.Component.Form.TextInput");return(0,fo.createVNode)(t,e,null)}var ho=l(a("vue")),Co=l(a("rcfm/helper"));var ht=l(a("vue")),vo=l(a("rcfm")),ie=l(a("rcfm/helper"));function Sn(e){let t=ie.UI.Section.Field,r=ie.UI.use("Vue.Component.Form.Field"),{Component:o,state:n,props:i}=e,{reactive:c,member:m,onAction:u}=ie.UI.Section.Member.getProps(i),{values:p,errors:f}=n;return(0,ht.createVNode)(r,{className:`rcfm-${vo.Struct.string.dashCase(p.type)}`,label:p.label,hint:p.hint,error:f==null?void 0:f.value,required:t.isRequired({reactive:c,member:m})},{default:()=>[(0,ht.createVNode)(o,{name:p.name,value:p.value,invalid:!!f,readonly:t.isReadonly({reactive:c,member:m}),placeholder:"placeholder"in p?p.placeholder:null,options:"options"in p?p.options:null,onChange:h=>u&&u({action:"update",reactive:c,id:m.id,prop:"value",value:h})},null)]})}var P={props:["Component","props"],setup(e){let t=ie.UI.Vue.composables.useReactive,{reactive:r,member:o}=ie.UI.Section.Member.getProps(e.props),n=t(r,{id:o.id});return()=>(0,ht.createVNode)(Sn,s(d({},e),{state:n.value}),null)}};function Ct(e){let t=Co.UI.use("Vue.Component.Form.Checkboxes");return(0,ho.createVNode)(P,{Component:t,props:e},null)}var ir=l(a("vue")),go=l(a("rcfm/helper"));function xn(e){let t=go.UI.use("Vue.Component.Form.TextInput");return(0,ir.createVNode)(t,s(d({},e),{multiline:!0}),null)}function gt(e){return(0,ir.createVNode)(P,{Component:xn,props:e},null)}var Vo=l(a("vue")),No=l(a("rcfm/helper"));function Vt(e){let t=No.UI.use("Vue.Component.Form.MultipleSelect");return(0,Vo.createVNode)(P,{Component:t,props:e},null)}var So=l(a("vue")),xo=l(a("rcfm/helper"));function Nt(e){let t=xo.UI.use("Vue.Component.Form.NumberInput");return(0,So.createVNode)(P,{Component:t,props:e},null)}var Po=l(a("vue")),yo=l(a("rcfm/helper"));function St(e){let t=yo.UI.use("Vue.Component.Form.Radios");return(0,Po.createVNode)(P,{Component:t,props:e},null)}var Mo=l(a("vue")),Fo=l(a("rcfm/helper"));function xt(e){let t=Fo.UI.use("Vue.Component.Form.SingleSelect");return(0,Mo.createVNode)(P,{Component:t,props:e},null)}var Io=l(a("vue")),Eo=l(a("rcfm/helper"));function Pt(e){let t=Eo.UI.use("Vue.Component.Form.TextInput");return(0,Io.createVNode)(P,{Component:t,props:e},null)}var Pe=l(a("vue")),ar=l(a("rcfm/helper"));function Pn(e){let{label:t,description:r}=e.state.values;return!t&&!r?null:(0,Pe.createVNode)("div",{className:"rcfm-fieldset"},[t&&(0,Pe.createVNode)("h2",{className:"rcfm-fieldset-title"},[t]),r&&(0,Pe.createVNode)("p",{className:"rcfm-fieldset-description"},[r])])}var lr={props:["reactive","member"],setup(e){let t=ar.UI.Vue.composables.useReactive,{reactive:r,member:o}=ar.UI.Section.Member.getProps(e),n=t(r,{id:o.id});return()=>(0,Pe.createVNode)(Pn,{state:n.value},null)}};var mr=l(a("vue")),Ro=l(a("rcfm")),ae=l(a("rcfm/helper"));function cr(e,{slots:t}){let{props:r,state:o}=e,{member:n,onAction:i}=ae.UI.Section.Member.getProps(r);if(!o)return null;let c=jo(o.value);return(0,mr.createVNode)(c,s(d({},r),{onAction:i,key:n.id}),{default:()=>{var m;return[(m=t==null?void 0:t.default)==null?void 0:m.call(t)]}})}cr.abilities=function(e={}){let{reactive:t,member:r}=ae.UI.Section.Member.getProps(e),o=t.get({id:r.id,prop:"type"});return o?jo(o).abilities||{}:!1};function jo(e=""){let t=Ro.Struct.string.capitalize(e);return ae.UI.use(`Vue.Section.${t}`)}var ur={props:["reactive","member","onAction"],setup(e,{slots:t}){let r=ae.UI.Vue.composables.useReactive,{reactive:o,member:n}=ae.UI.Section.Member.getProps(e),i=r(o,{id:n.id,prop:"type"});return()=>(0,mr.createVNode)(cr,{props:e,state:i.value},{default:()=>{var c;return[(c=t==null?void 0:t.default)==null?void 0:c.call(t)]}})},abilities:cr.abilities};var pr=l(a("vue")),ko=l(a("rcfm")),w=l(a("rcfm/helper"));function dr(e,{slots:t}){let{props:r,state:o}=e,{member:n,onAction:i}=w.UI.Section.Member.getProps(r);if(!o)return null;let c=w.UI.try([_o(o.value),"Vue.Section.Member.Previewer.Fallback"]);return(0,pr.createVNode)(c,s(d({},r),{onAction:i,key:n.id}),{default:()=>{var m;return[(m=t==null?void 0:t.default)==null?void 0:m.call(t)]}})}dr.abilities=function(e={}){let{reactive:t,member:r}=w.UI.Section.Member.getProps(e),o=t.get({id:r.id,prop:"type"});if(!o)return!1;let n=_o(o);return w.UI.has(n)?w.UI.use(n).abilities||{}:{}};function _o(e=""){return`Vue.Section.${ko.Struct.string.capitalize(e)}.Previewer`}var sr={props:["reactive","member","onAction"],setup(e,{slots:t}){let r=w.UI.Vue.composables.useReactive,{reactive:o,member:n}=w.UI.Section.Member.getProps(e),i=r(o,{id:n.id,prop:"type"});return()=>(0,pr.createVNode)(dr,{props:e,state:i.value},{default:()=>{var c;return[(c=t==null?void 0:t.default)==null?void 0:c.call(t)]}})},abilities:dr.abilities};var le=l(a("vue")),wo=l(a("rcfm")),G=l(a("rcfm/helper"));function yn(e,{slots:t}){let{props:r,state:o}=e,n=G.UI.Section.Member,i=G.UI.use("Vue.Component.Highlight"),c=G.UI.use("Vue.Section.Member"),{reactive:m,member:u,onAction:p}=n.getProps(r),f=m.get({id:u.id,prop:"type"});return(0,le.createVNode)("div",{className:G.UI.joinClass(["rcfm-member-previewer",`rcfm-${wo.Struct.string.dashCase(f)}-previewer`])},[(0,le.createVNode)(i,{type:"error",on:!!(o==null?void 0:o.errors),hint:n.errorMessages({reactive:m,member:u,errors:o.errors})},{default:()=>[(0,le.createVNode)("fieldset",{disabled:!0,className:"rcfm-member-previewer-container"},[(0,le.createVNode)(c,{reactive:m,member:u,onAction:p},{default:()=>{var h;return[(h=t==null?void 0:t.default)==null?void 0:h.call(t)]}})])]})])}var fr={props:["reactive","member","onAction"],setup(e,{slots:t}){let r=G.UI.Vue.composables.useReactive,{reactive:o,member:n}=G.UI.Section.Member.getProps(e),i=r(o,{id:n.id});return()=>(0,le.createVNode)(yn,{props:e,state:i.value},{default:()=>{var c;return[(c=t==null?void 0:t.default)==null?void 0:c.call(t)]}})}};var br=l(a("vue")),Uo=l(a("rcfm")),yt=l(a("rcfm/helper"));function Mn(e){let t=yt.UI.Section.Member,{type:r}=e,{member:o,onAction:n}=t.getProps(e);if(!r)return null;let i=Uo.Struct.string.capitalize(r.value),c=yt.UI.try([`Vue.Section.${i}.Editor`,"Vue.Section.Member.Editor.Fallback"]);return(0,br.createVNode)(c,s(d({},e),{onAction:n,key:o.id}),null)}var vr={props:["reactive","member"],setup(e){let r=yt.UI.Vue.composables.useReactive(e.reactive,{id:e.member.id,prop:"type"});return()=>(0,br.createVNode)(Mn,s(d({},e),{type:r.value}),null)}};var hr=l(a("vue")),To=l(a("rcfm")),Mt=l(a("rcfm/helper"));function Ft(e){let t=Mt.UI.Section.Member,r=Mt.UI.use("Vue.Section.Member.PropEditor"),{reactive:o,member:n,onAction:i}=t.getProps(e),c=o.schema.for({id:n.id}),m=o.get({id:n.id,prop:"type"});return(0,hr.createVNode)("div",{className:Mt.UI.joinClass(["rcfm-member-editor",`rcfm-${To.Struct.string.dashCase(m)}-editor`])},[c.map(u=>(0,hr.createVNode)(r,{key:u.prop,reactive:o,onAction:i,member:{id:n.id,prop:u.prop}},null))])}var Cr=l(a("vue")),Ao=l(a("rcfm")),It=l(a("rcfm/helper"));function Fn(e){let t=It.UI.Section.Member.Prop,{type:r}=e,{member:o,onAction:n}=t.getProps(e);if(!r)return null;let i=Ao.Struct.string.capitalize(r.value),c=It.UI.try([`Vue.Section.${i}.PropEditor`,"Vue.Section.Member.PropEditor.Fallback"]);return(0,Cr.createVNode)(c,s(d({},e),{onAction:n,key:`${o.id}/${o.prop}`}),null)}var gr={props:["reactive","member"],setup(e){let r=It.UI.Vue.composables.useReactive(e.reactive,{id:e.member.id,prop:"type"});return()=>(0,Cr.createVNode)(Fn,s(d({},e),{type:r.value}),null)}};var L=l(a("vue")),z=l(a("rcfm")),U=l(a("rcfm/helper"));function In(e){let t=U.UI.Section.Member.Prop,r=U.UI.use("Vue.Component.Tabs"),o=U.UI.use("Vue.Component.TabPane"),n=U.UI.use("Vue.Section.Member.PropEditor.Condition"),{state:i}=e,{reactive:c,member:m,onAction:u}=t.getProps(e),p=c.get({id:m.id,prop:"type"}),f=z.Struct.string.capitalize(p),h=z.Struct.string.capitalize(m.prop),v=U.UI.try([`Vue.Section.${f}.PropEditor.${h}`,`Vue.Section.Member.PropEditor.${h}`,"Vue.Section.Member.PropEditor.Simple"]),[b,g]=[i.raw.value,i.error?i.error[0]:null],V=t.isSchemable({reactive:c,member:m}),y=V&&t.isCondition({reactive:c,value:b}),N=c.schema.for(m).label,x=!V||!y?0:1,W=V?[z.I18n.global.t("section.member.prop.always"),z.I18n.global.t("section.member.prop.conditional")]:[],be=qt=>u&&u(s(d({},m),{action:"update",reactive:c,value:qt})),on=qt=>u&&u(s(d({},m),{action:"update",reactive:c,value:t.getDefault({reactive:c,member:m,conditional:qt&&V})}));return(0,L.createVNode)(r,{className:U.UI.joinClass(["rcfm-member-prop-editor",`rcfm-${z.Struct.string.dashCase(f)}-prop-editor`]),title:N,labels:W,activeIndex:x,onSwitch:on},{default:()=>[(0,L.createVNode)(o,null,{default:()=>[x===0&&(0,L.createVNode)(v,{reactive:c,member:m,value:b,exception:g,onChange:be},null)]}),(0,L.createVNode)(o,null,{default:()=>[x===1&&(0,L.createVNode)(n,{reactive:c,member:m,value:b,exception:g,onChange:be,ResultComponent:v,defaultResult:t.getDefault({reactive:c,member:m})},null)]})]})}var Vr={props:["reactive","member"],setup(e){let r=U.UI.Vue.composables.useReactive(e.reactive,e.member);return()=>(0,L.createVNode)(In,s(d({},e),{state:r.value}),null)}};var q=l(a("vue")),ye=l(a("rcfm/helper"));function En(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!(0,q.isVNode)(e)}function Et(e){let t,r=ye.UI.Section.Member.Condition,o=ye.UI.use("Vue.Component.Highlight"),n=ye.UI.use("Vue.Section.Member.PropEditor.Condition.WhenBranch"),i=ye.UI.use("Vue.Section.Member.PropEditor.Condition.ElseBranch"),{reactive:c,member:m,exception:u,value:p,ResultComponent:f,defaultResult:h,onChange:v}=r.getProps(e);v=r.decorateOnChange({reactive:c,value:p,defaultResult:h,onChange:v});let[b,g]=[(u==null?void 0:u.message)||"",(u==null?void 0:u.data)||{}];return(0,q.createVNode)("div",{className:"rcfm-member-prop-editor-condition"},[(0,q.createVNode)(o,{type:"error",hint:b,on:r.isWhensException(u)},En(t=p.whens.map((V,y)=>(0,q.createVNode)(n,{key:y,reactive:c,member:m,value:V,onChange:N=>v(s(d({},N),{branchIndex:y})),ResultComponent:f,exception:g.branchIndex===y?u:null},null)))?t:{default:()=>[t]}),(0,q.createVNode)(i,{reactive:c,member:m,value:p.else,onChange:v,ResultComponent:f,exception:g.branchIndex===p.whens.length?u:null},null)])}var Rt=l(a("vue")),Bo=l(a("rcfm")),Ho=l(a("rcfm/helper"));function jt(e){let t=Ho.UI.Section.Member.Condition,{reactive:r,member:o,value:n,onChange:i,ResultComponent:c,exception:m}=e;return(0,Rt.createVNode)("div",{className:"rcfm-member-prop-editor-condition-else-branch"},[(0,Rt.createVNode)("h6",{className:"rcfm-member-prop-editor-condition-branch-title"},[Bo.I18n.global.t("section.member.prop.condition.elseBranch.resultTitle")]),(0,Rt.createVNode)(c,{reactive:r,member:o,value:n.result,onChange:u=>i({target:"else",action:"update",result:u}),exception:t.isConditionException(m)?null:m},null)])}var F=l(a("vue")),Me=l(a("rcfm")),me=l(a("rcfm/helper"));function Nr(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!(0,F.isVNode)(e)}function kt(e){let t,r,o,n=me.UI.Section.Member.Condition,[i,c,m,u]=[me.UI.use("Vue.Component.Button"),me.UI.use("Vue.Component.ButtonGroup"),me.UI.use("Vue.Component.Highlight"),me.UI.use("Vue.Section.Member.PropEditor.Condition.WhenBranch.Rule")],{reactive:p,member:f,value:h,onChange:v,ResultComponent:b,exception:g}=e,[V,y]=[(g==null?void 0:g.message)||"",(g==null?void 0:g.data)||{}];return(0,F.createVNode)("div",{className:"rcfm-member-prop-editor-condition-when-branch"},[(0,F.createVNode)("h6",{className:"rcfm-member-prop-editor-condition-branch-title"},[Me.I18n.global.t("section.member.prop.condition.whenBranch.title")]),(0,F.createVNode)(m,{type:"error",hint:V,on:n.isRulesException(g)},Nr(t=h.rules.map((N,x)=>(0,F.createVNode)(u,{key:x,reactive:p,member:f,value:N,onChange:W=>v(s(d({},W),{ruleIndex:x})),exception:y.ruleIndex===x?g:null},null)))?t:{default:()=>[t]}),(0,F.createVNode)("h6",{className:"rcfm-member-prop-editor-condition-branch-title"},[Me.I18n.global.t("section.member.prop.condition.whenBranch.resultTitle")]),(0,F.createVNode)(b,{reactive:p,member:f,value:h.result,onChange:N=>v({target:"when",action:"update",result:N}),exception:n.isConditionException(g)?null:g},null),(0,F.createVNode)(c,{fluid:!0},{default:()=>[(0,F.createVNode)(i,{color:"danger",onClick:()=>v({target:"when",action:"delete"})},Nr(r=Me.I18n.global.t("section.member.prop.condition.whenBranch.delete"))?r:{default:()=>[r]}),(0,F.createVNode)(i,{color:"secondary",onClick:()=>v({target:"when",action:"append"})},Nr(o=Me.I18n.global.t("section.member.prop.condition.whenBranch.add"))?o:{default:()=>[o]})]})])}var I=l(a("vue")),T=l(a("rcfm/helper"));function _t(e){let t=T.UI.Section.Member.Condition,[r,o,n,i,c,m]=[T.UI.use("Vue.Component.Button"),T.UI.use("Vue.Component.ButtonGroup"),T.UI.use("Vue.Component.Highlight"),T.UI.use("Vue.Section.Member.PropEditor.Validation.Item"),T.UI.use("Vue.Section.Member.PropEditor.Condition.WhenBranch.RuleLogic"),T.UI.use("Vue.Section.Member.PropEditor.Condition.WhenBranch.RuleProvider")],{reactive:u,member:p,value:f,onChange:h,exception:v}=e,b=u.schema.reference.parse(f.expression.value,{relier:{id:p.id,prop:p.prop}});return(0,I.createVNode)("div",{className:"rcfm-member-prop-editor-condition-rule"},[(0,I.createVNode)(n,{type:"error",hint:(v==null?void 0:v.message)||"",on:t.isLogicException(v)||t.isProviderException(v)},{default:()=>[(0,I.createVNode)("div",{className:"rcfm-member-prop-editor-condition-rule-row"},[f.logic&&(0,I.createVNode)(c,{reactive:u,member:p,value:f,onChange:h},null),(0,I.createVNode)(m,{reactive:u,member:p,value:f,onChange:h},null),(0,I.createVNode)(o,null,{default:()=>[(0,I.createVNode)(r,{color:"danger",icon:"cross",onClick:()=>h({target:"rule",action:"delete"})},null),(0,I.createVNode)(r,{color:"secondary",icon:"plus",onClick:()=>h({target:"rule",action:"append"})},null)]})])]}),f.expression.value&&(0,I.createVNode)(n,{type:"error",hint:(v==null?void 0:v.message)||"",on:t.isValidationException(v)},{default:()=>[(0,I.createVNode)("div",{className:"rcfm-member-prop-editor-condition-rule-row"},[(0,I.createVNode)(i,{scope:"condition",reactive:u,member:b,value:f.expression,actions:["update"],onChange:g=>h(s(d({},g),{target:"rule",action:"update"}))},null)])]})])}var Fe=l(a("vue")),Sr=l(a("rcfm/helper"));function wt(e){let t=Sr.UI.Section.Member.Condition,r=Sr.UI.use("Vue.Component.Form.SingleSelect"),{value:o,onChange:n}=e;return(0,Fe.createVNode)(Fe.Fragment,null,[(0,Fe.createVNode)(r,{className:"rcfm-member-prop-editor-condition-rule-logic",options:t.getLogics(),value:o.logic,onChange:i=>n({target:"rule",action:"update",logic:i})},null)])}var ce=l(a("vue")),Wo=l(a("rcfm")),Ie=l(a("rcfm/helper")),A=l(a("vue"));function Rn(e){let t=Ie.UI.Section.Member.Condition.joinProvider,r=Ie.UI.Section.Member.Condition.splitProvider,o=Ie.UI.use("Vue.Component.Form.SingleSelect"),{reactive:n,member:i,onChange:c}=e,{provider:m,providers:u,refreshProviders:p}=e;return(0,ce.createVNode)(ce.Fragment,null,[(0,ce.createVNode)(o,{className:"rcfm-member-prop-editor-condition-rule-provider",options:u,value:t({id:m.id,prop:m.prop}),placeholder:u.length?null:Wo.I18n.global.t("section.member.noProviders"),onChange:f=>c({target:"rule",action:"update",value:n.schema.reference.stringify(r(f),{format:"interpolation",relier:{id:i.id,prop:i.prop}})}),onFocus:p},null)])}var xr={props:["reactive","member","value"],setup(e){let t=Ie.UI.Section.Member.Condition.getProviders,r=(0,A.ref)(t({reactive:e.reactive,member:e.member})),o=()=>r.value=t({reactive:e.reactive,member:e.member}),n=(0,A.computed)(()=>e.reactive.schema.reference.parse(e.value.expression.value,{relier:{id:e.member.id,prop:e.member.prop}})||{}),i=[];return(0,A.watch)(()=>n.value.id,c=>{!c||i.push(e.reactive.subscribe({id:c},o))},{immediate:!0}),(0,A.onUnmounted)(()=>i.forEach(c=>c())),()=>(0,ce.createVNode)(Rn,s(d({},e),{provider:n.value,providers:r.value,refreshProviders:o}),null)}};var Ee=l(a("vue")),ue=l(a("rcfm/helper"));function jn(e){let t=ue.UI.Section.Member.Prop,r=ue.UI.use("Vue.Component.Highlight"),o=ue.UI.use("Vue.Component.Form.Field"),{name:n}=e,{reactive:i,member:c,value:m,exception:u,onChange:p}=e,f=t.getType({reactive:i,member:c}),h=ue.UI.use(`Vue.Component.Form.${f}`),{placeholder:v,hint:b}=i.schema.for(c);return(0,Ee.createVNode)(r,{type:"error",hint:u==null?void 0:u.message,on:!!u},{default:()=>[(0,Ee.createVNode)(o,{hint:b},{default:()=>[(0,Ee.createVNode)(h,{name:n,placeholder:v,value:m,onChange:p},null)]})]})}var Pr={setup(e){let t=ue.UI.Vue.composables.useNonblankName();return()=>(0,Ee.createVNode)(jn,s(d({},e),{name:t.value}),null)}};var Re=l(a("vue")),pe=l(a("rcfm/helper")),Oo=l(a("vue"));function kn(e){let t=pe.UI.Section.Member.Calculation,r=pe.UI.use("Vue.Component.Highlight"),o=pe.UI.use("Vue.Component.Form.Field"),n=pe.UI.use("Vue.Component.Form.Object"),i=e.name,{reactive:c,member:m,value:u,exception:p,onChange:f}=t.getProps(e),{placeholder:h,hint:v}=c.schema.for(m);return(0,Re.createVNode)(r,{type:"error",hint:p==null?void 0:p.message,on:!!p},{default:()=>[(0,Re.createVNode)(o,{hint:v},{default:()=>[(0,Re.createVNode)(n,{multiline:!0,name:i,placeholder:h,value:u,onChange:f},null)]})]})}var yr={props:["name"],setup(e){let r=pe.UI.Vue.composables.useNonblankName((0,Oo.toRef)(e,"name"));return()=>(0,Re.createVNode)(kn,s(d({},e),{name:r.value}),null)}};var je=l(a("vue")),J=l(a("rcfm/helper"));function _n(e){let t=J.UI.Section.Member.Prop,r=J.UI.use("Vue.Component.Highlight"),o=J.UI.use("Vue.Component.Form.Field"),{reactive:n,member:i,value:c,exception:m,onChange:u}=e,{name:p,calculation:f}=e,h=t.getType({reactive:n,member:i}),v=J.UI.use(`Vue.Component.Form.${h}`),{placeholder:b,hint:g}=n.schema.for(i),V=f&&f.raw.value;return(0,je.createVNode)(r,{type:"error",hint:m==null?void 0:m.message,on:!!m},{default:()=>[(0,je.createVNode)(o,{hint:g},{default:()=>[(0,je.createVNode)(v,{readonly:!!V,name:p,placeholder:b,value:c,onChange:u},null)]})]})}var Mr={props:["reactive","member"],setup(e){let t=J.UI.Vue.composables.useReactive,o=J.UI.Vue.composables.useNonblankName(),n=t(e.reactive,{id:e.member.id,prop:"calculation"});return()=>(0,je.createVNode)(_n,s(d({},e),{name:o.value,calculation:n.value}),null)}};var de=l(a("vue")),Ut=l(a("rcfm/helper"));function wn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!(0,de.isVNode)(e)}function Tt(e){let t,r=Ut.UI.Section.Member.Options,o=Ut.UI.use("Vue.Component.Highlight"),n=Ut.UI.use("Vue.Section.Member.PropEditor.Options.Item"),{reactive:i,member:c,exception:m,value:u,onChange:p}=r.getProps(e);p=r.decorateOnChange({reactive:i,member:c,value:u,onChange:p});let[f,h]=[(m==null?void 0:m.message)||"",(m==null?void 0:m.data)||{}];return(0,de.createVNode)("div",{className:"rcfm-member-prop-editor-options"},[(0,de.createVNode)(o,{type:"error",hint:f,on:!!(m&&!("optionIndex"in h))},wn(t=u.map((v,b)=>(0,de.createVNode)(n,{key:b,reactive:i,member:c,value:v,onChange:g=>p(s(d({},g),{index:b})),exception:m&&h.optionIndex===b?m:null},null)))?t:{default:()=>[t]})])}var j=l(a("vue")),Fr=l(a("rcfm")),ke=l(a("rcfm/helper"));function At(e){let t=ke.UI.use("Vue.Component.Button"),r=ke.UI.use("Vue.Component.ButtonGroup"),o=ke.UI.use("Vue.Component.Form.TextInput"),n=ke.UI.use("Vue.Component.Highlight"),{value:i,exception:c,onChange:m}=e;return(0,j.createVNode)("div",{className:"rcfm-member-prop-editor-options-item"},[(0,j.createVNode)(n,{type:"error",hint:c==null?void 0:c.message,on:!!c},{default:()=>[(0,j.createVNode)("div",{className:"rcfm-member-prop-editor-options-item-row"},[(0,j.createVNode)("label",{className:"rcfm-fmlabel rcfm-fmtag"},[Fr.I18n.global.t("section.member.prop.options.each.labelLabel")]),(0,j.createVNode)(o,{value:i.label,onChange:u=>m({action:"update",label:u})},null),(0,j.createVNode)("label",{className:"rcfm-fmlabel rcfm-fmtag"},[Fr.I18n.global.t("section.member.prop.options.each.valueLabel")]),(0,j.createVNode)(o,{value:i.value,onChange:u=>m({action:"update",value:u})},null),(0,j.createVNode)(r,null,{default:()=>[(0,j.createVNode)(t,{color:"danger",icon:"cross",onClick:()=>m({action:"delete"})},null),(0,j.createVNode)(t,{color:"secondary",icon:"plus",onClick:()=>m({action:"append"})},null)]})])]})])}var Bt=l(a("vue")),Ht=l(a("rcfm/helper"));function Wt(e){let{getProps:t,decorateOnChange:r}=Ht.UI.Section.Member.Validation,o=Ht.UI.use("Vue.Component.Highlight"),n=Ht.UI.use("Vue.Section.Member.PropEditor.Validation.Item"),{reactive:i,member:c,value:m,exception:u,actions:p,onChange:f}=t(e);return f=r({reactive:i,value:m,onChange:f}),(0,Bt.createVNode)("div",{className:"rcfm-member-prop-editor-validation"},[m.map((h,v)=>{var b;return(0,Bt.createVNode)(o,{type:"error",key:v,hint:u==null?void 0:u.message,on:((b=u==null?void 0:u.data)==null?void 0:b.validationIndex)===v},{default:()=>[(0,Bt.createVNode)(n,{scope:"validation",reactive:i,member:c,value:h,actions:p,onChange:g=>f(s(d({},g),{index:v}))},null)]})})])}var K=l(a("vue")),_e=l(a("rcfm/helper"));function Ot(e){let t=_e.UI.use("Vue.Component.Button"),r=_e.UI.use("Vue.Component.ButtonGroup"),o=_e.UI.use("Vue.Section.Member.PropEditor.Validation.ItemName"),n=_e.UI.use("Vue.Section.Member.PropEditor.Validation.ItemRule"),{reactive:i,member:c,value:m,onChange:u,actions:p,scope:f}=e;return(0,K.createVNode)("div",{className:"rcfm-member-prop-editor-validation-item"},[(0,K.createVNode)(o,{reactive:i,member:c,value:m,onChange:u,scope:f},null),m.name&&(0,K.createVNode)(n,{reactive:i,member:c,value:m,onChange:u,scope:f},null),(p.includes("delete")||p.includes("append"))&&(0,K.createVNode)(r,null,{default:()=>[p.includes("delete")&&(0,K.createVNode)(t,{color:"danger",icon:"cross",onClick:()=>u({action:"delete"})},null),p.includes("append")&&(0,K.createVNode)(t,{color:"secondary",icon:"plus",onClick:()=>u({action:"append"})},null)]})])}var we=l(a("vue")),Ir=l(a("rcfm/helper"));function Dt(e){let t=Ir.UI.Section.Member.Validation,r=Ir.UI.use("Vue.Component.Form.SingleSelect"),{reactive:o,member:n,value:i,onChange:c,scope:m}=e,u=t.getValidators({reactive:o,member:n,scope:m});return(0,we.createVNode)(we.Fragment,null,[(0,we.createVNode)(r,{value:i.name,options:u,onChange:p=>c({action:"update",name:p})},null)])}var Ue=l(a("vue")),Do=l(a("rcfm")),Te=l(a("rcfm/helper"));function $t(e){let t=Te.UI.Section.Member.Validation,{reactive:r,member:o,value:n,onChange:i}=e,c=t.getRuleType({reactive:r,member:o,value:n});if(!c)return null;let m=Do.Struct.string.capitalize(n.name),[u,p]=[`Vue.Component.Form.${c}`,`Vue.Section.Member.PropEditor.Validation.ItemRule.${m}`],f=Te.UI.try([p,u]);return(0,Ue.createVNode)(Ue.Fragment,null,[(0,Ue.createVNode)(f,{value:n.rule,onChange:h=>i({action:"update",rule:h}),reactive:Te.UI.has(p)?r:null,member:Te.UI.has(p)?o:null},null)])}var Ae=l(a("vue")),Be=l(a("rcfm/helper"));function Er(e,{slots:t}){let r=Be.UI.Section.Member,o=Be.UI.use("Vue.Component.Form.Field"),n=Be.UI.use("Vue.Component.Highlight"),{reactive:i,member:c}=r.getProps(e),{state:m}=e,{label:u,editable:p}=m.values;return(0,Ae.createVNode)(o,{className:"rcfm-subform",label:u},{default:()=>[(0,Ae.createVNode)(n,{type:"error",hintPosition:"top",className:"rcfm-subform-container",on:!!(m==null?void 0:m.errors),hint:r.errorMessages({reactive:i,member:c,errors:m.errors})},{default:()=>{var f;return[(0,Ae.createVNode)("fieldset",{className:"rcfm-subform-descendants",disabled:!p},[(f=t==null?void 0:t.default)==null?void 0:f.call(t)])]}})]})}Er.abilities={WRAP_DESCENDANTS:!0};var Rr={props:["reactive","member"],setup(e,{slots:t}){let o=Be.UI.Vue.composables.useReactive(e.reactive,{id:e.member.id});return()=>(0,Ae.createVNode)(Er,s(d({},e),{state:o.value}),{default:()=>{var n;return[(n=t==null?void 0:t.default)==null?void 0:n.call(t)]}})},abilities:Er.abilities};var k=l(a("vue")),jr=l(a("rcfm")),He=l(a("rcfm/helper"));function $o(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!(0,k.isVNode)(e)}function kr(e,{slots:t}){var h;let r,o,n=He.UI.Section.Subform,i=He.UI.use("Vue.Component.Button"),{reactive:c,member:m,onAction:u}=He.UI.Section.Member.getProps(e),p=e.order.value,f=c.family.ancestor({id:m.id}).id;return(0,k.createVNode)("div",{className:"rcfm-subform-fieldset"},[(0,k.createVNode)("div",{className:"rcfm-subform-fieldset-descendants"},[(h=t==null?void 0:t.default)==null?void 0:h.call(t)]),(0,k.createVNode)("div",{className:"rcfm-subform-fieldset-actions"},[(0,k.createVNode)(i,{color:"secondary",size:"small",onClick:()=>{if(!u)return;let[v,b]=[c.family,m.id];v.sibling({id:b})?u({action:"delete",id:b}):n.collectFields({reactive:c,collection:v.descendant({id:b})}).forEach(g=>u({action:"update",id:g.id,prop:"value",value:null}))}},$o(r=jr.I18n.global.t("section.subform.fieldset.remove"))?r:{default:()=>[r]}),(0,k.createVNode)(i,{color:"secondary",size:"small",onClick:()=>u&&u({action:"add",parentId:f,props:{type:"SubformFieldset",order:p+1}})},$o(o=jr.I18n.global.t("section.subform.fieldset.insert"))?o:{default:()=>[o]})])])}kr.abilities={WRAP_DESCENDANTS:!0};var _r={props:["reactive","member"],setup(e,{slots:t}){let o=He.UI.Vue.composables.useReactive(e.reactive,{id:e.member.id,prop:"order"});return()=>(0,k.createVNode)(kr,s(d({},e),{order:o.value}),{default:()=>{var n;return[(n=t==null?void 0:t.default)==null?void 0:n.call(t)]}})},abilities:kr.abilities};var We=l(a("vue")),Oe=l(a("rcfm/helper"));function wr(e,{slots:t}){let r=Oe.UI.Section.Member,o=Oe.UI.use("Vue.Component.Form.Field"),n=Oe.UI.use("Vue.Component.Highlight"),{reactive:i,member:c}=r.getProps(e),{state:m}=e,u=!m.values.visible||!m.values.editable;return(0,We.createVNode)("div",{className:"rcfm-subform-previewer"},[(0,We.createVNode)(n,{type:"error",hintPosition:"top",on:!!(m==null?void 0:m.errors),"data-disabled":u?!0:null,className:"rcfm-subform-previewer-container",hint:r.errorMessages({reactive:i,member:c,errors:m.errors})},{default:()=>[(0,We.createVNode)(o,{label:m.values.label},{default:()=>{var p;return[(p=t==null?void 0:t.default)==null?void 0:p.call(t)]}})]})])}wr.abilities={WRAP_DESCENDANTS:!0};var Ur={props:["reactive","member"],setup(e,{slots:t}){let o=Oe.UI.Vue.composables.useReactive(e.reactive,{id:e.member.id});return()=>(0,We.createVNode)(wr,s(d({},e),{state:o.value}),{default:()=>{var n;return[(n=t==null?void 0:t.default)==null?void 0:n.call(t)]}})},abilities:wr.abilities};var Tr=l(a("vue")),Go=l(a("rcfm/helper"));function Ar(e,{slots:t}){var o;return e.order.value!==0?null:(0,Tr.createVNode)("div",{className:"rcfm-subform-fieldset-previewer"},[(o=t==null?void 0:t.default)==null?void 0:o.call(t)])}Ar.abilities={WRAP_DESCENDANTS:!0};var Br={props:["reactive","member"],setup(e,{slots:t}){let o=Go.UI.Vue.composables.useReactive(e.reactive,{id:e.member.id,prop:"order"});return()=>(0,Tr.createVNode)(Ar,s(d({},e),{order:o.value}),{default:()=>{var n;return[(n=t==null?void 0:t.default)==null?void 0:n.call(t)]}})},abilities:Ar.abilities};var Gt=l(a("vue")),De=l(a("rcfm/helper")),Lo=l(a("vue"));function Un(e){let t=De.UI.Section.Member,r=De.UI.use("Vue.View.Form.Tree"),o=De.UI.getProp(e,"reactive",{required:!0}),n=e.children?e.children.value:[];return(0,Gt.createVNode)("div",{className:"rcfm-form"},[n.map(i=>(0,Gt.createVNode)(r,{key:i.id,reactive:o,member:i,onAction:(c={})=>t.onAction(s(d({},c),{reactive:o}))},null))])}var Hr={props:["reactive"],setup(e){let t=De.UI.Vue.composables.useReactive,r=(0,Lo.computed)(()=>e.reactive.family.root().id),o=t(e.reactive,{id:r.value,prop:"children"});return()=>(0,Gt.createVNode)(Un,s(d({},e),{children:o.value}),null)}};var E=l(a("vue")),zo=l(a("rcfm")),se=l(a("rcfm/helper")),qo={props:["reactive","member"],setup(e){let t=se.UI.Vue.composables.useReactive,r=t(e.reactive,{id:e.member.id,prop:"visible"}),o=t(e.reactive,{id:e.member.id,prop:"children"});return()=>(0,E.createVNode)(Tn,s(d({},e),{visible:r.value.value,children:o.value.value}),null)}};function Tn(e){let t=se.UI.Section.Member,r=se.UI.use("Vue.Section.Member"),{reactive:o,member:n,onAction:i}=t.getProps(e),{visible:c,children:m}=e;if(c===!1)return null;let u=o.get({id:n.id,prop:"type"}),p=zo.Struct.string.dashCase(u),f=r.abilities({reactive:o,member:n});return(0,E.createVNode)(E.Fragment,null,[(0,E.createVNode)(An,{typeDashed:p,_withoutWrapper:e._withoutWrapper},{default:()=>[(0,E.createVNode)(r,{reactive:o,member:n,onAction:i},{default:()=>[m.length>0&&f.WRAP_DESCENDANTS&&(0,E.createVNode)(Jo,{reactive:o,onAction:i,children:m,_withoutWrapper:!0},null)]})]}),m.length>0&&!f.RENDER_DESCENDANTS&&!f.WRAP_DESCENDANTS&&(0,E.createVNode)("div",{className:se.UI.joinClass({root:"rcfm-form",klass:["descendants",`${p}-descendants`]})},[(0,E.createVNode)(Jo,{reactive:o,onAction:i,children:m},null)])])}function An(e,{slots:t}){var n,i;let{_withoutWrapper:r,typeDashed:o}=e;return r?(n=t==null?void 0:t.default)==null?void 0:n.call(t):(0,E.createVNode)("div",{className:se.UI.joinClass({root:"rcfm-form",klass:["member",o]})},[(i=t==null?void 0:t.default)==null?void 0:i.call(t)])}function Jo(e){let{reactive:t,onAction:r,children:o,_withoutWrapper:n}=e;return o.map(i=>(0,E.createVNode)(qo,{key:i.id,reactive:t,member:i,onAction:r,_withoutWrapper:n},null))}var Wr=qo;var R=l(a("vue")),_=l(a("rcfm/helper")),Q=l(a("vue"));function Bn(e){let t=_.UI.Section.Member,r=_.UI.use("Vue.Component.Alert"),o=_.UI.use("Vue.Component.AlertText"),n=_.UI.use("Vue.Section.Member.Editor"),i=_.UI.use("Vue.View.Form.Builder.Tree"),c=_.UI.use("Vue.View.Form.Builder.Inserter"),m=_.UI.getProp(e,"reactive",{required:!0}),u=m.family.root().id,p=e.state?e.state.value:[],f=e.editorRef,{editId:h,setEditId:v}=e,{exception:b,setException:g}=e,{setExceptionTimer:V}=e,y=(N={})=>{try{let[x,W]=[N.action,N.id];if(x==="edit")return v(W);let be=t.onAction(s(d({},N),{reactive:m}));return x!=="delete"||m.family.hasnt({id:h})&&v(""),be}catch(x){g(x),V(setTimeout(()=>g(null),3e3))}};return(0,R.createVNode)("div",{className:"rcfm-form-builder"},[(0,R.createVNode)("div",{className:"rcfm-form-builder-previewer"},[p.length?p.map(N=>(0,R.createVNode)(i,{key:N.id,reactive:m,member:N,onAction:y},null)):(0,R.createVNode)("div",{className:"rcfm-form-builder-inserter-of-root"},[(0,R.createVNode)(c,{reactive:m,member:{id:u},onAction:y},null)]),b&&(0,R.createVNode)(r,{className:"rcfm-form-builder-exception",type:"error"},{default:()=>[(0,R.createVNode)(o,null,{default:()=>[b.message]})]})]),h&&(0,R.createVNode)("div",{ref:f,className:"rcfm-form-builder-editor",onClick:N=>N.target===f.value&&v("")},[(0,R.createVNode)("div",{className:"rcfm-form-builder-editor-container"},[(0,R.createVNode)(n,{reactive:m,member:{id:h},onAction:y},null)])])])}var Or={props:["reactive"],setup(e){let r=_.UI.Vue.composables.useReactive(e.reactive,{id:e.reactive.family.root().id,prop:"children"}),o=(0,Q.ref)(null),[n,i]=[(0,Q.ref)(""),f=>n.value=f],[c,m]=[(0,Q.ref)(null),f=>c.value=f],u=(0,Q.ref)(null),p=f=>u.value=f;return(0,Q.onUnmounted)(()=>clearTimeout(u.value)),()=>(0,R.createVNode)(Bn,s(d({},e),{state:r.value,editorRef:o,editId:n.value,setEditId:i,exception:c.value,setException:m,exceptionTimer:u.value,setExceptionTimer:p}),null)}};var S=l(a("vue")),Ko=l(a("rcfm")),B=l(a("rcfm/helper")),Qo={props:["reactive","member"],setup(e){let r=B.UI.Vue.composables.useReactive(e.reactive,{id:e.member.id,prop:"children"});return()=>(0,S.createVNode)(Hn,s(d({},e),{children:r.value}),null)}};function Hn(e){let t=B.UI.Section.Member,r=B.UI.use("Vue.Section.Member.Previewer"),o=B.UI.use("Vue.View.Form.Builder.Actions"),n=B.UI.use("Vue.View.Form.Builder.Inserter"),{reactive:i,member:c,onAction:m}=t.getProps(e),u=e.children.value,p=i.family.ancestor(c).id,f=i.get({id:c.id,prop:"type"}),h=Ko.Struct.string.dashCase(f),v=r.abilities({reactive:i,member:c});return(0,S.createVNode)(S.Fragment,null,[(0,S.createVNode)(Wn,{typeDashed:h,_withoutWrapper:e._withoutWrapper},{default:()=>[(0,S.createVNode)(o,{reactive:i,member:c,onAction:m},null),(0,S.createVNode)(r,{reactive:i,member:c,onAction:m},{default:()=>[v.WRAP_DESCENDANTS&&(u.length>0?(0,S.createVNode)(Xo,{reactive:i,onAction:m,childre:u,_withoutWrapper:!0},null):(0,S.createVNode)(n,{reactive:i,member:c,onAction:m},null))]})]}),!v.RENDER_DESCENDANTS&&!v.WRAP_DESCENDANTS&&(u.length>0?(0,S.createVNode)("div",{className:B.UI.joinClass({root:"rcfm-form-builder",klass:["descendants",`${h}-descendants`]})},[(0,S.createVNode)(Xo,{reactive:i,onAction:m,childre:u},null)]):(0,S.createVNode)(n,{reactive:i,member:c,onAction:m},null)),(0,S.createVNode)(n,{reactive:i,member:{id:p},onAction:(b={})=>m(s(d({},b),{props:s(d({},b.props),{order:i.get({id:c.id,prop:"order"})+1})}))},null)])}function Wn(e,{slots:t}){var n,i;let{_withoutWrapper:r,typeDashed:o}=e;return r?(n=t==null?void 0:t.default)==null?void 0:n.call(t):(0,S.createVNode)("div",{className:B.UI.joinClass({root:"rcfm-form-builder",klass:["member",o]})},[(i=t==null?void 0:t.default)==null?void 0:i.call(t)])}function Xo(e){let{reactive:t,onAction:r,childre:o,_withoutWrapper:n}=e;return o.map(i=>(0,S.createVNode)(Qo,{key:i.id,reactive:t,member:i,onAction:r,_withoutWrapper:n},null))}var Dr=Qo;var X=l(a("vue")),Yo=l(a("rcfm")),$e=l(a("rcfm/helper"));function On(e){let t=$e.UI.Section.Member,r=$e.UI.use("Vue.Component.Button"),{reactive:o,member:n,onAction:i}=t.getProps(e),c=e.type.value,m=e.order.value,u=e.siblings.value,p=Yo.Struct.string.dashCase(c);return(0,X.createVNode)("div",{className:$e.UI.joinClass({root:"rcfm-form-builder",klass:["actions",`${p}-actions`]})},[(0,X.createVNode)(r,{className:"rcfm-form-builder-action-delete",circle:!0,icon:"cross",color:"danger",size:"small",onClick:()=>i&&i({action:"delete",reactive:o,id:n.id})},null),(0,X.createVNode)(r,{className:"rcfm-form-builder-action-decrease",circle:!0,icon:"arrow-up",color:"secondary",size:"small",disabled:m===0,onClick:()=>i&&i({action:"update",reactive:o,id:n.id,prop:"order",value:m-1})},null),(0,X.createVNode)(r,{className:"rcfm-form-builder-action-increase",circle:!0,icon:"arrow-down",color:"secondary",size:"small",disabled:m===u.length-1,onClick:()=>i&&i({action:"update",reactive:o,id:n.id,prop:"order",value:m+1})},null),(0,X.createVNode)(r,{className:"rcfm-form-builder-action-edit",circle:!0,icon:"more",color:"secondary",size:"small",onClick:()=>i&&i({action:"edit",reactive:o,id:n.id})},null)])}var $r={props:["reactive","member"],setup(e){let t=$e.UI.Vue.composables.useReactive,r=t(e.reactive,{id:e.member.id,prop:"type"}),o=t(e.reactive,{id:e.member.id,prop:"order"}),n=t(e.reactive,{id:e.reactive.family.ancestor({id:e.member.id}).id,prop:"children"});return()=>(0,X.createVNode)(On,s(d({},e),{type:r.value,order:o.value,siblings:n.value}),null)}};var fe=l(a("vue")),tn=l(a("rcfm")),zt=l(a("rcfm/helper")),Gr=l(a("vue"));var H=l(a("vue")),Lt=l(a("rcfm/helper")),Zo=l(a("vue"));function Dn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!(0,H.isVNode)(e)}function $n(e){let t,{container:r}=e,{options:o,onSelect:n,onCancel:i}=e,c=Lt.UI.Vue.composables.useOnClickOutside,m=Lt.UI.use("Vue.Component.Button"),u=Lt.UI.use("Vue.Component.ButtonGroup");return c(r,i),(0,H.createVNode)("div",{className:"rcfm-form-builder-inserter-child-select"},[(0,H.createVNode)("div",{ref:r,className:"rcfm-form-builder-inserter-child-select-container"},[(0,H.createVNode)(u,{vertical:!0,fluid:!0},Dn(t=o.map(p=>(0,H.createVNode)(m,{key:p.type,color:"secondary",onClick:()=>n(p.type)},{default:()=>[p.label]})))?t:{default:()=>[t]})])])}var en={setup(e){let t=(0,Zo.ref)(null);return()=>(0,H.createVNode)($n,s(d({},e),{container:t}),null)}};function Gn(e){let t=zt.UI.Section.Member,r=zt.UI.use("Vue.Component.Button"),{reactive:o,member:n,onAction:i}=t.getProps(e),{trigger:c,showSelect:m,setShowSelect:u}=e,p=t.getChildTypes({reactive:o,member:n});if(!p.length)return null;let f=o.get({id:n.id,prop:"type"}),h=tn.Struct.string.dashCase(f);return(0,fe.createVNode)("div",{className:zt.UI.joinClass({root:"rcfm-form-builder",klass:["inserter",`${h}-inserter`]})},[(0,fe.createVNode)("div",{ref:c,className:"rcfm-form-builder-inserter-trigger"},[(0,fe.createVNode)(r,{circle:!0,color:"dark",icon:"plus",size:o.family.ancestor(n)?"small":"medium",onClick:()=>p.length>1?u(!0):i({action:"add",parentId:n.id,props:{type:p[0].type}})},null)]),m&&(0,fe.createVNode)(en,{options:p,onCancel:v=>u(c.value.contains(v.target)),onSelect:v=>{u(!1);let b=i({action:"add",parentId:n.id,props:{type:v}});v==="Subform"&&i({action:"add",parentId:b,props:{type:"SubformFieldset"}})}},null)])}var rn={setup(e){let t=(0,Gr.ref)(null),r=(0,Gr.ref)(!1),o=n=>r.value=n;return()=>(0,fe.createVNode)(Gn,s(d({},e),{trigger:t,showSelect:r.value,setShowSelect:o}),null)}};var Lr=rn;C.UI.Vue={composables:{useOnClickOutside:Le,useNonblankName:ze,useReactive:Jt}};C.UI.install({name:"Vue.Component.Icon",Component:Je});C.UI.install({name:"Vue.Component.Alert",Component:Xe});C.UI.install({name:"Vue.Component.AlertTitle",Component:Ye});C.UI.install({name:"Vue.Component.AlertText",Component:Ze});C.UI.install({name:"Vue.Component.Tabs",Component:tt});C.UI.install({name:"Vue.Component.TabPane",Component:rt});C.UI.install({name:"Vue.Component.Button",Component:Ke});C.UI.install({name:"Vue.Component.ButtonGroup",Component:Qe});C.UI.install({name:"Vue.Component.Highlight",Component:et});C.UI.install({name:"Vue.Component.Form.Field",Component:ot});C.UI.install({name:"Vue.Component.Form.NumberInput",Component:Yt});C.UI.install({name:"Vue.Component.Form.TextInput",Component:Zt});C.UI.install({name:"Vue.Component.Form.SingleSelect",Component:er});C.UI.install({name:"Vue.Component.Form.MultipleSelect",Component:tr});C.UI.install({name:"Vue.Component.Form.Checkboxes",Component:rr});C.UI.install({name:"Vue.Component.Form.Radios",Component:or});C.UI.install({name:"Vue.Component.Form.String",Component:vt});C.UI.install({name:"Vue.Component.Form.Number",Component:bt});C.UI.install({name:"Vue.Component.Form.Boolean",Component:ft});C.UI.install({name:"Vue.Component.Form.Object",Component:ne});C.UI.install({name:"Vue.Component.Form.Array",Component:st});C.UI.install({name:"Vue.Section.TextField",Component:Pt});C.UI.install({name:"Vue.Section.MultilineTextField",Component:gt});C.UI.install({name:"Vue.Section.NumberField",Component:Nt});C.UI.install({name:"Vue.Section.RadioField",Component:St});C.UI.install({name:"Vue.Section.CheckboxField",Component:Ct});C.UI.install({name:"Vue.Section.SingleSelectField",Component:xt});C.UI.install({name:"Vue.Section.MultipleSelectField",Component:Vt});C.UI.install({name:"Vue.Section.Fieldset",Component:lr});C.UI.install({name:"Vue.Section.Member",Component:ur});C.UI.install({name:"Vue.Section.Member.Previewer",Component:sr});C.UI.install({name:"Vue.Section.Member.Previewer.Fallback",Component:fr});C.UI.install({name:"Vue.Section.Member.Editor",Component:vr});C.UI.install({name:"Vue.Section.Member.Editor.Fallback",Component:Ft});C.UI.install({name:"Vue.Section.Member.PropEditor",Component:gr});C.UI.install({name:"Vue.Section.Member.PropEditor.Fallback",Component:Vr});C.UI.install({name:"Vue.Section.Member.PropEditor.Condition",Component:Et});C.UI.install({name:"Vue.Section.Member.PropEditor.Condition.ElseBranch",Component:jt});C.UI.install({name:"Vue.Section.Member.PropEditor.Condition.WhenBranch",Component:kt});C.UI.install({name:"Vue.Section.Member.PropEditor.Condition.WhenBranch.Rule",Component:_t});C.UI.install({name:"Vue.Section.Member.PropEditor.Condition.WhenBranch.RuleLogic",Component:wt});C.UI.install({name:"Vue.Section.Member.PropEditor.Condition.WhenBranch.RuleProvider",Component:xr});C.UI.install({name:"Vue.Section.Member.PropEditor.Simple",Component:Pr});C.UI.install({name:"Vue.Section.Member.PropEditor.Calculation",Component:yr});C.UI.install({name:"Vue.Section.Member.PropEditor.Value",Component:Mr});C.UI.install({name:"Vue.Section.Member.PropEditor.Options",Component:Tt});C.UI.install({name:"Vue.Section.Member.PropEditor.Options.Item",Component:At});C.UI.install({name:"Vue.Section.Member.PropEditor.Validation",Component:Wt});C.UI.install({name:"Vue.Section.Member.PropEditor.Validation.Item",Component:Ot});C.UI.install({name:"Vue.Section.Member.PropEditor.Validation.ItemName",Component:Dt});C.UI.install({name:"Vue.Section.Member.PropEditor.Validation.ItemRule",Component:$t});C.UI.install({name:"Vue.Section.Subform",Component:Rr});C.UI.install({name:"Vue.Section.SubformFieldset",Component:_r});C.UI.install({name:"Vue.Section.Subform.Previewer",Component:Ur});C.UI.install({name:"Vue.Section.SubformFieldset.Previewer",Component:Br});C.UI.Section.Subform.installFieldComponents({installer:C.UI,namespace:"Vue.Section."});C.UI.install({name:"Vue.View.Form",Component:Hr});C.UI.install({name:"Vue.View.Form.Tree",Component:Wr});C.UI.install({name:"Vue.View.Form.Builder",Component:Or});C.UI.install({name:"Vue.View.Form.Builder.Tree",Component:Dr});C.UI.install({name:"Vue.View.Form.Builder.Actions",Component:$r});C.UI.install({name:"Vue.View.Form.Builder.Inserter",Component:Lr});})();
//# sourceMappingURL=rcfm.vue.iife.min.js-e314edd8.map
